<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>í•‘í¬ë Œíƒˆ - íœ´ëŒ€í° ë‹¨ê¸° ëŒ€ì—¬</title>
    
    <!-- 1. ìŠ¤íƒ€ì¼ (Tailwind CSS) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        toss: {
                            bg: '#F2F4F6',
                            blue: '#3182F6',
                            red: '#F04452',
                            text: '#191F28',
                            gray: '#4E5968',
                            lightgray: '#8B95A1',
                            input: '#F9FAFB',
                            border: '#E5E8EB'
                        },
                        brand: {
                            500: '#F04452',
                            50: '#FEF2F3'
                        }
                    },
                    borderRadius: {
                        '3xl': '1.5rem',
                        '4xl': '2rem',
                    },
                    boxShadow: {
                        'toss': '0 4px 20px rgba(0, 0, 0, 0.05)',
                    }
                }
            }
        }
    </script>
    
    <!-- 2. ë¦¬ì•¡íŠ¸ (React) ì—”ì§„ -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- 3. Babel (ì½”ë“œ ë³€í™˜ê¸°) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 4. ì¹´ì¹´ì˜¤ ìš°í¸ë²ˆí˜¸ ì„œë¹„ìŠ¤ -->
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        * { font-family: 'Pretendard', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes slideInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes bounceIn { 
            0% { transform: scale(0.3); opacity: 0; } 
            50% { transform: scale(1.05); opacity: 1; } 
            70% { transform: scale(0.9); } 
            100% { transform: scale(1); } 
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin-slow { animation: spin 1s linear infinite; }
        
        .animate-slide-in { animation: slideIn 0.3s ease-out forwards; }
        .animate-slide-in-up { animation: slideInUp 0.3s ease-out forwards; }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
        .animate-bounce-in { animation: bounceIn 0.6s cubic-bezier(0.215, 0.610, 0.355, 1.000) forwards; }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // â˜…â˜…â˜… [ì„¤ì •] êµ¬ê¸€ ìŠ¤í¬ë¦½íŠ¸ ë°°í¬ URL â˜…â˜…â˜…
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwpfTK2ZzWv0NahGSZvYAxRucFdPSmj2mWwDyfmR5UOD5Ivy_3mh4gZ40BmKjyLa_cNAw/exec"; 

        // --- ë°ì´í„° ---
        const HOLIDAYS = {
            '2025-1-1': 'ì‹ ì •', '2025-1-28': 'ì„¤ë‚ ', '2025-1-29': 'ì„¤ë‚ ', '2025-1-30': 'ì„¤ë‚ ',
            '2025-3-1': 'ì‚¼ì¼ì ˆ', '2025-3-3': 'ëŒ€ì²´ê³µíœ´ì¼', '2025-5-5': 'ì–´ë¦°ì´ë‚ ', '2025-5-6': 'ëŒ€ì²´ê³µíœ´ì¼',
            '2025-6-6': 'í˜„ì¶©ì¼', '2025-8-15': 'ê´‘ë³µì ˆ', '2025-10-3': 'ê°œì²œì ˆ', '2025-10-5': 'ì¶”ì„',
            '2025-10-6': 'ì¶”ì„', '2025-10-7': 'ì¶”ì„', '2025-10-8': 'ëŒ€ì²´ê³µíœ´ì¼', '2025-10-9': 'í•œê¸€ë‚ ',
            '2025-12-25': 'ì„±íƒ„ì ˆ',
            '2026-1-1': 'ì‹ ì •',
            '2026-2-16': 'ì„¤ë‚ ', '2026-2-17': 'ì„¤ë‚ ', '2026-2-18': 'ì„¤ë‚ ',
            '2026-3-1': 'ì‚¼ì¼ì ˆ', '2026-3-2': 'ëŒ€ì²´ê³µíœ´ì¼',
            '2026-5-5': 'ì–´ë¦°ì´ë‚ ', '2026-5-24': 'ë¶€ì²˜ë‹˜ì˜¤ì‹ ë‚ ', '2026-5-25': 'ëŒ€ì²´ê³µíœ´ì¼',
            '2026-6-6': 'í˜„ì¶©ì¼',
            '2026-8-15': 'ê´‘ë³µì ˆ', '2026-8-17': 'ëŒ€ì²´ê³µíœ´ì¼',
            '2026-9-24': 'ì¶”ì„', '2026-9-25': 'ì¶”ì„', '2026-9-26': 'ì¶”ì„', '2026-9-28': 'ëŒ€ì²´ê³µíœ´ì¼',
            '2026-10-3': 'ê°œì²œì ˆ',
            '2026-10-9': 'í•œê¸€ë‚ ',
            '2026-12-25': 'ì„±íƒ„ì ˆ'
        };

        const INITIAL_REVIEWS = [
            { id: 1, name: 'ê¹€*ì§€', model: 'ê°¤ëŸ­ì‹œ S23 ìš¸íŠ¸ë¼', rating: 5, text: 'ì½˜ì„œíŠ¸ ì§ìº  ëŒ€ë°•... S23U ìµœê³ ì—ìš” ã… ã…  ë•ë¶„ì— ì¸ìƒìƒ· ê±´ì¡ŒìŠµë‹ˆë‹¤! ë‹¤ìŒì—ë„ ë¬´ì¡°ê±´ ì—¬ê¸°ì„œ ë¹Œë¦´ê²Œìš”â¤ï¸', date: '2025.12.31' },
            { id: 2, name: 'ì´*ì€', model: 'ì•„ì´í° 17 í”„ë¡œ', rating: 5, text: 'ì•„ì´í° ìƒ‰ê° ë¯¸ì³¤ì–´ìš”.. í™”ì§ˆë„ ì¢‹ê³  ë°°ì†¡ë„ í•˜ë£¨ ë§Œì— ì™€ì„œ ë†€ëì–´ìš”! ìƒíƒœë„ ì™„ì „ ìƒˆê±°ê°™ìŒğŸ‘', date: '2025.12.29' },
            { id: 3, name: 'ë°•*ìˆ˜', model: 'ê°¤ëŸ­ì‹œ S24 ìš¸íŠ¸ë¼', rating: 5, text: 'ì¤Œ ë•¡ê¸¸ ë•Œ ì•ˆ ê¹¨ì§€ëŠ” ê±° ì‹¤í™”ì¸ê°€ìš”.. 3ì¸µì´ì—ˆëŠ”ë° 1ì—´ ì‹œì•¼ë¡œ ë³´ê³  ì™”ìŠµë‹ˆë‹¤ ã…‹ã…‹ ê°•ì¶”!!', date: '2025.12.28' },
            { id: 4, name: 'ìµœ*ì˜', model: 'ê°¤ëŸ­ì‹œ S23 ìš¸íŠ¸ë¼', rating: 5, text: 'íŒ¬ë¯¸íŒ… ë•Œë¬¸ì— ê¸‰í•˜ê²Œ ë¹Œë ¸ëŠ”ë° í€µìœ¼ë¡œ ë°”ë¡œ ë³´ë‚´ì£¼ì…”ì„œ ì‚´ì•˜ì–´ìš” ã… ã…  ì‚¬ì¥ë‹˜ ì ê²Œ ì¼í•˜ê³  ë§ì´ ë²„ì„¸ìš”..', date: '2025.12.24' },
            { id: 5, name: 'ì •*ë¯¼', model: 'ê°¤ëŸ­ì‹œ S25 ìš¸íŠ¸ë¼', rating: 5, text: 'ì‹ ìƒ S25U ì¨ë³´ê³  ì‹¶ì–´ì„œ ë¹Œë ¸ëŠ”ë° ëŒ€ë§Œì¡±! 100ë°° ì¤Œ ì†ë–¨ë°© ë¯¸ì³¤ìŠµë‹ˆë‹¤...', date: '2025.12.24' },
            { id: 6, name: 'ê°•*ìš°', model: 'ì•„ì´í° 17 í”„ë¡œë§¥ìŠ¤', rating: 5, text: 'í™”ë©´ë„ í¬ê³  ë°°í„°ë¦¬ë„ ì˜¤ë˜ê°€ì„œ ì˜ìƒ ì°ê¸° ë„ˆë¬´ ì¢‹ì•˜ìŠµë‹ˆë‹¤. ë¬´ì¡°ê±´ í”„ë¡œë§¥ìŠ¤ ì¶”ì²œ!', date: '2025.12.17' },
            { id: 7, name: 'ìœ¤*ì„œ', model: 'ê°¤ëŸ­ì‹œ S24 ìš¸íŠ¸ë¼', rating: 4, text: 'ë°°ì†¡ ë¹ ë¥´ê³  í¬ì¥ë„ ê¼¼ê¼¼í•´ìš”. ì‚¬ìš©ë²•ë„ ì¹œì ˆí•˜ê²Œ ì•Œë ¤ì£¼ì…”ì„œ ì˜ ì¼ìŠµë‹ˆë‹¤.', date: '2025.12.17' },
            { id: 8, name: 'í•œ*ë‚˜', model: 'ì•„ì´í° 17 í”„ë¡œ', rating: 5, text: 'ì–´ë‘ìš´ ê³µì—°ì¥ì´ì—ˆëŠ”ë°ë„ ë…¸ì´ì¦ˆ ì—†ì´ ì˜ ì°í˜”ì–´ìš”. ì—­ì‹œ ì•„ì´í° ê°ì„±...', date: '2025.12.10' },
        ];

        // --- ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸ ---
        const Icon = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Icons = {
            Smartphone: (props) => <Icon {...props}><rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line></Icon>,
            Calendar: (props) => <Icon {...props}><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></Icon>,
            ShieldCheck: (props) => <Icon {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="m9 12 2 2 4-4"></path></Icon>,
            Zap: (props) => <Icon {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></Icon>,
            Truck: (props) => <Icon {...props}><rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></Icon>,
            ChevronLeft: (props) => <Icon {...props}><polyline points="15 18 9 12 15 6"></polyline></Icon>,
            CheckCircle: (props) => <Icon {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></Icon>,
            Gift: (props) => <Icon {...props}><polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path></Icon>,
            CreditCard: (props) => <Icon {...props}><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line></Icon>,
            User: (props) => <Icon {...props}><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></Icon>,
            MapPin: (props) => <Icon {...props}><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></Icon>,
            Phone: (props) => <Icon {...props}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></Icon>,
            Home: (props) => <Icon {...props}><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></Icon>,
            BookOpen: (props) => <Icon {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></Icon>,
            FileText: (props) => <Icon {...props}><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></Icon>,
            Search: (props) => <Icon {...props}><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></Icon>,
            Headphones: (props) => <Icon {...props}><path d="M3 18v-6a9 9 0 0 1 18 0v6"></path><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"></path></Icon>,
            HelpCircle: (props) => <Icon {...props}><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></Icon>,
            Star: (props) => <Icon {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></Icon>,
            Megaphone: (props) => <Icon {...props}><path d="m3 11 18-5v12L3 14v-3z"></path><path d="M11.6 16.8a3 3 0 1 1-5.8-1.6"></path></Icon>,
            Ticket: (props) => <Icon {...props}><path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"/></Icon>,
            Clock: (props) => <Icon {...props}><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></Icon>,
            Cloud: (props) => <Icon {...props}><path d="M17.5 19c0-3.037-2.463-5.5-5.5-5.5S6.5 15.963 6.5 19 6.5 21.5 9 21.5 12 21.5c3.037 0 5.5-2.463 5.5-5.5z"></path><path d="M12 13.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11h.5"></path></Icon>,
            Settings: (props) => <Icon {...props}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.72l-.15.1a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.72l.15-.1a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></Icon>,
            Android: (props) => <Icon {...props}><path d="M18.2 12.1c.95-.92 1.63-2.18 1.8-3.6.01-.13.01-.26 0-.39-.17-1.42-.85-2.68-1.8-3.6l1.35-1.35a1 1 0 1 0-1.42-1.42l-1.35 1.35c-1.28-.79-2.78-1.25-4.38-1.25s-3.1.46-4.38 1.25L6.67 1.72a1 1 0 0 0-1.42 1.42l1.35 1.35c-.95.92-1.63 2.18-1.8 3.6-.01.13-.01.26 0 .39.17 1.42.85 2.68 1.8 3.6A7.94 7.94 0 0 0 2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1 7.94 7.94 0 0 0-3.8-5.9zM9 9a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm6 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/></Icon>,
            Apple: (props) => <Icon {...props}><path d="M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-8a5.55 5.55 0 0 1 1.6-4C21.72 7 19.34 7 19.34 7c-1.31 0-2.81-.97-4.12-.97-1.31 0-2.91 1-4.06 1C8 7 5.5 9.16 5.5 13.06c0 2.72 1.34 5.94 3.12 8 .88 1 2.22 1.94 3.38 1.94.94 0 2.06-1.06 4-1.06zM15 7a4 4 0 0 0-1-3 4 4 0 0 0 3.8 3.8A3.75 3.75 0 0 0 15 7z"/></Icon>,
            CalendarPlus: (props) => <Icon {...props}><path d="M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/><line x1="19" y1="16" x2="19" y2="22"/><line x1="16" y1="19" x2="22" y2="19"/></Icon>,
            Copy: (props) => <Icon {...props}><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></Icon>,
            Check: (props) => <Icon {...props}><polyline points="20 6 9 17 4 12"></polyline></Icon>,
            RefreshCw: (props) => <Icon {...props}><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 12"></path><path d="M21 3v9h-9"></path></Icon>,
            MessageCircle: (props) => <Icon {...props}><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></Icon>,
            ArrowLeft: (props) => <Icon {...props}><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></Icon>
        };

        const PhoneRentalApp = () => {
            const [activeNav, setActiveNav] = useState('home'); 
            const [viewMode, setViewMode] = useState('dashboard'); 
            const [step, setStep] = useState(1); 
            const [activeTab, setActiveTab] = useState('galaxy');
            const [backupTab, setBackupTab] = useState('samsung');
            const [activeReviewTab, setActiveReviewTab] = useState('all');
            
            // ì˜ˆì•½ ë°ì´í„°
            const [selectedPhone, setSelectedPhone] = useState(null);
            const [startDate, setStartDate] = useState(null);
            const [endDate, setEndDate] = useState(null);
            const [dateWarning, setDateWarning] = useState(null);
            const [insurance, setInsurance] = useState('none'); 
            const [batteryCount, setBatteryCount] = useState(0); 
            const [deliveryMethod, setDeliveryMethod] = useState(null); 
            const [returnMethod, setReturnMethod] = useState(null); 
            const [dataBackup, setDataBackup] = useState(false);
            const [discounts, setDiscounts] = useState({ app: false, blog: false });
            
            // userInfo
            const [userInfo, setUserInfo] = useState({ name: '', phone: '', zipcode: '', address: '', detailAddress: '', scheduleName: '' });
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [isSearching, setIsSearching] = useState(false);
            
            // ì—°ì¥ í˜ì´ì§€ ìƒíƒœ
            const [extModel, setExtModel] = useState('galaxy');
            const [extDays, setExtDays] = useState(1);
            const [extForm, setExtForm] = useState({ name: '', phone: '' });

            // ë°±ì—… í˜ì´ì§€ ìƒíƒœ
            const [backupForm, setBackupForm] = useState({ name: '', phone: '' });

            // ë¦¬ë·° ì‘ì„± ê´€ë ¨ ìƒíƒœ
            const [isReviewModalOpen, setIsReviewModalOpen] = useState(false);
            const [currentReviewItem, setCurrentReviewItem] = useState(null);
            const [reviewForm, setReviewForm] = useState({ rating: 5, text: '' });
            const [reviews, setReviews] = useState(INITIAL_REVIEWS); // ì „ì²´ ë¦¬ë·° ìƒíƒœ ê´€ë¦¬
            const [myReviews, setMyReviews] = useState([]); // ë‚´ê°€ ì“´ ë¦¬ë·° ê´€ë¦¬

            // ì¶”ì²œ ë§ˆë²•ì‚¬ ìƒíƒœ
            const [recVenue, setRecVenue] = useState('KSPO DOME');
            const [recSeat, setRecSeat] = useState('floor');
            const [recResult, setRecResult] = useState(null);

            const [currentMonth, setCurrentMonth] = useState(new Date());
            const [lookupName, setLookupName] = useState('');
            const [lookupPhone, setLookupPhone] = useState('');
            const [lookupResult, setLookupResult] = useState(null);
            // [ìˆ˜ì •] autoLogin ì œê±°
            // const [autoLogin, setAutoLogin] = useState(true);
            
            const [isManualAddress, setIsManualAddress] = useState(false);
            const [isLogoutModalOpen, setIsLogoutModalOpen] = useState(false);
            
            // ì„±ê³µ í™”ë©´ ì •ë³´
            const [successData, setSuccessData] = useState(null);
            
            // phones ë°ì´í„°
            const phones = {
                galaxy: [
                    { id: 'g23', name: 'ê°¤ëŸ­ì‹œ S23 ìš¸íŠ¸ë¼', price: 8500, tag: 'ê°€ì„±ë¹„' },
                    { id: 'g24', name: 'ê°¤ëŸ­ì‹œ S24 ìš¸íŠ¸ë¼', price: 9500, tag: 'ì¸ê¸°' },
                    { id: 'g25', name: 'ê°¤ëŸ­ì‹œ S25 ìš¸íŠ¸ë¼', price: 12500, tag: 'ìµœì‹ ìƒ' },
                ],
                iphone: [
                    { id: 'i17p', name: 'ì•„ì´í° 17 í”„ë¡œ', price: 16900, tag: 'ê°ì„±' },
                    { id: 'i17pm', name: 'ì•„ì´í° 17 í”„ë¡œë§¥ìŠ¤', price: 18900, tag: 'ëíŒì™•' },
                ]
            };
            
            // daysOfWeek ì •ì˜
            const daysOfWeek = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];

            useEffect(() => {
                const savedUser = localStorage.getItem('pink_user');
                if (savedUser) {
                    const { name, phone } = JSON.parse(savedUser);
                    setLookupName(name);
                    setLookupPhone(phone);
                    handleLookup(name, phone);
                }
            }, []);

            // ì´ë¦„ ë§ˆìŠ¤í‚¹ í•¨ìˆ˜
            const formatNameMasking = (name) => {
                if (!name || name.length < 2) return name;
                if (name.length === 2) return name[0] + '*';
                return name[0] + '*' + name[name.length - 1];
            };

            // ë¦¬ë·° ëª¨ë‹¬ ë“±ì€ ìƒëµí•˜ì§€ ì•Šê³  ëª¨ë‘ í¬í•¨
            const openReviewModal = (item) => {
                setCurrentReviewItem(item);
                if (item.myReviewId) {
                     const existingReview = reviews.find(r => r.id === item.myReviewId);
                     if (existingReview) {
                         setReviewForm({ rating: existingReview.rating, text: existingReview.text });
                     }
                } else {
                     setReviewForm({ rating: 5, text: '' });
                }
                setIsReviewModalOpen(true);
            };

            const handleReviewSubmit = () => {
                if (!reviewForm.text.trim()) {
                    alert("í›„ê¸° ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                    return;
                }
                
                if (currentReviewItem.myReviewId) {
                    setReviews(prevReviews => prevReviews.map(r => 
                        r.id === currentReviewItem.myReviewId 
                        ? { ...r, rating: reviewForm.rating, text: reviewForm.text } 
                        : r
                    ));
                    alert("í›„ê¸°ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ“");
                } else {
                    const today = new Date();
                    const newReviewId = Date.now();
                    const newReview = {
                        id: newReviewId,
                        name: formatNameMasking(lookupName),
                        model: currentReviewItem.model,
                        rating: reviewForm.rating,
                        text: reviewForm.text,
                        date: `${today.getFullYear()}.${today.getMonth() + 1}.${today.getDate()}`
                    };

                    currentReviewItem.myReviewId = newReviewId;

                    setMyReviews([...myReviews, currentReviewItem]); 
                    setReviews([newReview, ...reviews]);
                    alert("ì†Œì¤‘í•œ í›„ê¸°ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ’–");
                }
                
                setIsReviewModalOpen(false);
            };

            const handleRecommendation = () => {
                let rec = { name: '', reason: '', icon: '' };
                if (recSeat === 'floor') {
                    rec = { name: 'ê°¤ëŸ­ì‹œ S25 ìš¸íŠ¸ë¼', reason: 'ëˆˆì•ì— ìˆëŠ” ê²ƒì²˜ëŸ¼ ìƒìƒí•˜ê²Œ! ì–´ë‘ìš´ ê³³ì—ì„œë„ ì™„ë²½í•œ ìµœì‹ ìƒ S25Uë¥¼ ì¶”ì²œí•´ìš”! âœ¨', icon: 'Android' };
                } else if (recSeat === '1f') {
                    rec = { name: 'ê°¤ëŸ­ì‹œ S25 ìš¸íŠ¸ë¼', reason: 'ì ë‹¹í•œ ê±°ë¦¬ì—ì„œ ê³ í™”ì§ˆ ì˜ìƒê³¼ ì‚¬ì§„ì„ ëª¨ë‘ ì¡ìœ¼ë ¤ë©´ S25Uê°€ ë”±ì´ì—ìš”! ğŸ“¸', icon: 'Android' };
                } else if (recSeat === '2f') {
                    rec = { name: 'ê°¤ëŸ­ì‹œ S24 ìš¸íŠ¸ë¼', reason: 'ê±°ë¦¬ê°€ ì¡°ê¸ˆ ìˆë‹¤ë©´ ì¤Œ ê¸°ëŠ¥ì´ ê°•ë ¥í•˜ê³  ì•ˆì •ì ì¸ S24Uë¡œ ì„ ëª…í•˜ê²Œ ë‹¹ê²¨ ì°ìœ¼ì„¸ìš”! ğŸ”­', icon: 'Android' };
                } else {
                    rec = { name: 'ê°¤ëŸ­ì‹œ S23 ìš¸íŠ¸ë¼', reason: 'ë©€ë¦¬ì„œë„ ë‚´ ê°€ìˆ˜ë¥¼ ëˆˆì•ì—! ê°€ì„±ë¹„ ìµœê³ ì˜ 100ë°° ì¤Œ S23Uë¥¼ ì¶”ì²œë“œë ¤ìš”! ğŸŒ•', icon: 'Android' };
                }
                setRecResult(rec);
            };

            const isSameDayStart = startDate && (() => {
                const today = new Date();
                today.setHours(0,0,0,0);
                return startDate.getTime() === today.getTime();
            })();

            const isSundayOrHolidayStart = startDate && (() => {
                const year = startDate.getFullYear();
                const month = startDate.getMonth();
                const day = startDate.getDate();
                const dateKey = `${year}-${month + 1}-${day}`;
                return startDate.getDay() === 0 || !!HOLIDAYS[dateKey];
            })();

            const formatPhone = (value) => {
                const raw = value.replace(/[^0-9]/g, '');
                if (raw.length < 4) return raw;
                if (raw.length < 8) return `${raw.slice(0, 3)}-${raw.slice(3)}`;
                return `${raw.slice(0, 3)}-${raw.slice(3, 7)}-${raw.slice(7, 11)}`;
            };

            const handleAddressSearch = () => {
                if (!window.daum || !window.daum.Postcode) {
                    alert("ìš°í¸ë²ˆí˜¸ ì„œë¹„ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                    return;
                }
                new daum.Postcode({
                    oncomplete: function(data) {
                        let fullAddress = data.address;
                        let extraAddress = '';
                        if (data.addressType === 'R') {
                            if (data.bname !== '') extraAddress += data.bname;
                            if (data.buildingName !== '') extraAddress += (extraAddress !== '' ? `, ${data.buildingName}` : data.buildingName);
                            fullAddress += (extraAddress !== '' ? ` (${extraAddress})` : '');
                        }
                        setUserInfo(prev => ({ ...prev, zipcode: data.zonecode, address: fullAddress }));
                    }
                }).open();
            };

            const formatDateToKorean = (dateStr) => {
                if (!dateStr) return '-';
                if (dateStr.includes('(')) return dateStr;
                
                const parts = dateStr.split('-');
                if (parts.length !== 3) return dateStr;
                return `${parts[0]}ë…„ ${parseInt(parts[1])}ì›” ${parseInt(parts[2])}ì¼`;
            };

            const copyToClipboard = (text) => {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    alert('ê³„ì¢Œë²ˆí˜¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } catch (err) {
                    console.error('Copy failed', err);
                    alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                }
                document.body.removeChild(textArea);
            };

            const isHoliday = (date) => {
                const year = date.getFullYear();
                const month = date.getMonth() + 1;
                const day = date.getDate();
                const dateKey = `${year}-${month}-${day}`;
                const dayOfWeek = date.getDay(); 
                return dayOfWeek === 0 || dayOfWeek === 6 || !!HOLIDAYS[dateKey];
            };

            const getNextBusinessDay = (date) => {
                let nextDate = new Date(date);
                while (isHoliday(nextDate)) {
                    nextDate.setDate(nextDate.getDate() + 1);
                }
                return nextDate;
            };

            const getReturnDate = (date) => {
                if (!date) return null;
                return new Date(date);
            };

            const getArrivalDate = (date) => {
                if (!date) return null;
                return new Date(date);
            };

            const calculateDays = () => {
                if (!startDate || !endDate) return 0;
                const diffTime = endDate.getTime() - startDate.getTime();
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                return Math.max(0, diffDays + 1); 
            };
            
            const calculateTotal = () => {
                const days = calculateDays();
                if (days === 0 || !selectedPhone) return 0;
                let total = selectedPhone.price * days;
                
                if (insurance === 'basic') total += 3000;
                else if (insurance === 'premium') total += 5000;
                else if (insurance === 'none') total += 0;

                total += batteryCount * 3000;
                if (deliveryMethod === 'post') total += 4000;
                if (returnMethod === 'pickup') total += 4000;
                
                if (dataBackup) total += 10000;

                if (discounts.app) total -= 3000;
                if (discounts.blog) total -= 5000;

                return Math.max(0, total);
            };

            const getStatusClass = (status) => {
                if (!status) return 'bg-gray-200 text-gray-500';
                if (status.includes('í™•ì •')) return 'bg-green-100 text-green-600';
                if (status.includes('ì·¨ì†Œ') || status.includes('í™˜ë¶ˆ')) return 'bg-red-100 text-red-600';
                return 'bg-gray-200 text-gray-500';
            };
            
            const getCategoryBadge = (category) => {
                if (!category || category === 'ì˜ˆì•½ì‹ ì²­') return <span className="text-[10px] bg-rose-100 text-rose-600 px-2 py-0.5 rounded font-bold">ì˜ˆì•½</span>;
                if (category === 'ì—°ì¥ì‹ ì²­') return <span className="text-[10px] bg-orange-100 text-orange-600 px-2 py-0.5 rounded font-bold">ì—°ì¥</span>;
                if (category === 'ë°±ì—…ì‹ ì²­') return <span className="text-[10px] bg-green-100 text-green-600 px-2 py-0.5 rounded font-bold">ë°±ì—…</span>;
                return <span className="text-[10px] bg-gray-100 text-gray-600 px-2 py-0.5 rounded font-bold">{category}</span>;
            };

            const handleSubmit = async () => {
                if(!GOOGLE_SCRIPT_URL) {
                    alert("êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™ URLì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê°œë°œìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.");
                    return;
                }

                setIsSubmitting(true);

                const formatDate = (d) => d ? `${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()}` : '';
                const reviewType = discounts.app ? 'ì•±ë¦¬ë·°(D-1)' : (discounts.blog ? 'ë¸”ë¡œê·¸(D-1)' : 'ì—†ìŒ');
                const fullAddress = `${userInfo.address} ${userInfo.detailAddress}`.trim();

                let insuranceText = 'ë¯¸ì„ íƒ';
                if(insurance === 'none') insuranceText = 'ë¯¸ê°€ì…';
                else if(insurance === 'basic') insuranceText = 'ë² ì´ì§';
                else if(insurance === 'premium') insuranceText = 'í”„ë¦¬ë¯¸ì—„';

                let reviewText = 'ì—†ìŒ';
                if (discounts.app) reviewText = 'ì•±ë¦¬ë·°(-3,000ì›)';
                else if (discounts.blog) reviewText = 'ë¸”ë¡œê·¸(-5,000ì›)';

                let deliveryText = 'ë¯¸ì„ íƒ';
                if (deliveryMethod === 'post') deliveryText = 'íƒë°°';
                else if (deliveryMethod === 'quick') deliveryText = 'í€µ';
                else if (deliveryMethod === 'venue') deliveryText = 'ê³µì—°ì¥ìˆ˜ë ¹';

                const total = calculateTotal();

                const orderData = {
                    category: 'ì˜ˆì•½ì‹ ì²­',
                    orderTime: new Date().toLocaleString(),
                    battery: batteryCount,
                    model: selectedPhone.name,
                    modelNumber: "",
                    blank: "",
                    name: userInfo.name,
                    zipcode: `'${userInfo.zipcode}`, 
                    address: fullAddress,
                    phone: userInfo.phone,
                    startDate: formatDate(startDate),
                    endDate: formatDate(getReturnDate(endDate)),
                    scheduleName: userInfo.scheduleName || `${userInfo.name}ë‹˜ ëŒ€ì—¬`, 
                    delivery: deliveryText,
                    returnMethod: returnMethod === 'post' ? 'íƒë°°' : 'ë°©ë¬¸ìˆ˜ê±°',
                    review: reviewText,
                    totalPrice: total,
                    insurance: insuranceText,
                    dataBackup: dataBackup ? 'ì‹ ì²­(+10,000ì›)' : 'ë¯¸ì‹ ì²­'
                };

                try {
                    await fetch(GOOGLE_SCRIPT_URL, {
                        method: "POST",
                        mode: "no-cors",
                        headers: { "Content-Type": "text/plain;charset=utf-8" },
                        body: JSON.stringify(orderData),
                    });
                    
                    setSuccessData({
                        type: 'ì˜ˆì•½',
                        name: userInfo.name,
                        amount: total
                    });
                    setViewMode('success');

                } catch (error) {
                    console.error("Error submitting order:", error);
                    alert("ì£¼ë¬¸ ì „ì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                    setIsSubmitting(false);
                }
            };
            
            const handleGoHome = () => {
                setStep(1); 
                setSelectedPhone(null); 
                setStartDate(null); 
                setEndDate(null); 
                setInsurance('none');
                setUserInfo({ name: '', phone: '', zipcode: '', address: '', detailAddress: '', scheduleName: '' });
                setDataBackup(false);
                setDeliveryMethod(null);
                setReturnMethod(null);
                setDiscounts({ app: false, blog: false });
                setSuccessData(null); 
                setIsSubmitting(false);
                setActiveNav('home');
                setViewMode('dashboard');
            };

            const handleExtensionSubmit = async (extTotal) => {
                if (!extForm.name || !extForm.phone) {
                    alert("ì‹ ì²­ì ì„±í•¨ê³¼ ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                    return;
                }
                if(!GOOGLE_SCRIPT_URL) {
                    alert("ì‹œìŠ¤í…œ ì˜¤ë¥˜: ì—°ë™ URL ë¯¸ì„¤ì •");
                    return;
                }

                setIsSubmitting(true);
                const orderData = {
                    category: 'ì—°ì¥ì‹ ì²­',
                    orderTime: new Date().toLocaleString(),
                    model: extModel === 'galaxy' ? 'ê°¤ëŸ­ì‹œ (ì—°ì¥)' : 'ì•„ì´í° (ì—°ì¥)',
                    name: extForm.name,
                    phone: extForm.phone,
                    startDate: `(+${extDays}ì¼)`,
                    totalPrice: extTotal,
                    scheduleName: `${extForm.name}ë‹˜ ì—°ì¥ì‹ ì²­`
                };

                try {
                    await fetch(GOOGLE_SCRIPT_URL, {
                        method: "POST",
                        mode: "no-cors",
                        headers: { "Content-Type": "text/plain;charset=utf-8" },
                        body: JSON.stringify(orderData),
                    });
                    setSuccessData({
                        type: 'ì—°ì¥',
                        name: extForm.name,
                        amount: extTotal
                    });
                    setExtForm({ name: '', phone: '' });
                    setViewMode('success');

                } catch (error) {
                    alert("ì‹ ì²­ ì „ì†¡ ì‹¤íŒ¨");
                    setIsSubmitting(false);
                }
            };

            const handleBackupSubmit = async () => {
                if (!backupForm.name || !backupForm.phone) {
                    alert("ì‹ ì²­ì ì„±í•¨ê³¼ ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                    return;
                }
                if(!GOOGLE_SCRIPT_URL) {
                    alert("ì‹œìŠ¤í…œ ì˜¤ë¥˜: ì—°ë™ URL ë¯¸ì„¤ì •");
                    return;
                }

                setIsSubmitting(true);
                const orderData = {
                    category: 'ë°±ì—…ì‹ ì²­',
                    orderTime: new Date().toLocaleString(),
                    model: 'ë°ì´í„° ë°±ì—… ëŒ€í–‰',
                    name: backupForm.name,
                    phone: backupForm.phone,
                    totalPrice: 10000,
                    scheduleName: `${backupForm.name}ë‹˜ ë°±ì—…ì‹ ì²­`
                };

                try {
                    await fetch(GOOGLE_SCRIPT_URL, {
                        method: "POST",
                        mode: "no-cors",
                        headers: { "Content-Type": "text/plain;charset=utf-8" },
                        body: JSON.stringify(orderData),
                    });
                    
                    setSuccessData({
                        type: 'ë°±ì—…',
                        name: backupForm.name,
                        amount: 10000
                    });
                    setBackupForm({ name: '', phone: '' });
                    setViewMode('success');

                } catch (error) {
                    alert("ì‹ ì²­ ì „ì†¡ ì‹¤íŒ¨");
                    setIsSubmitting(false);
                }
            };

            const handleLookup = async (nameParam, phoneParam, isRefresh = false) => {
                const targetName = nameParam || lookupName;
                const targetPhone = phoneParam || lookupPhone;

                if (!targetName || targetPhone.length < 10) { 
                    if (!nameParam) alert('ì •ë³´ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.'); 
                    return; 
                }
                if (!GOOGLE_SCRIPT_URL) { alert("ì—°ë™ URLì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."); return; }
                
                setIsSearching(true);
                try {
                    const response = await fetch(`${GOOGLE_SCRIPT_URL}?name=${encodeURIComponent(targetName)}&phone=${encodeURIComponent(targetPhone)}`, { redirect: "follow" });
                    const result = await response.json();
                    
                    if (result.result === "success") { 
                        const rawData = result.data;
                        const dataArray = Array.isArray(rawData) ? rawData : (rawData ? [rawData] : []);
                        
                        setLookupResult([...dataArray].reverse()); 
                        
                        // [ìˆ˜ì •] ë‚´ ì •ë³´ ì €ì¥ ë¡œì§ ì œê±°
                    }
                    else { 
                        if (!nameParam) {
                            alert("ì¼ì¹˜í•˜ëŠ” ì˜ˆì•½ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤."); 
                            setLookupResult(null); 
                        }
                    }
                } catch (error) { 
                    if (!nameParam) alert("ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."); 
                } finally { 
                    setIsSearching(false); 
                }
            };
            
            const handleRefresh = async () => {
                if (lookupName && lookupPhone) {
                    await handleLookup(lookupName, lookupPhone, true); 
                }
            };

            const handleLogoutClick = () => {
                setIsLogoutModalOpen(true);
            };

            const handleLogoutConfirm = () => {
                localStorage.removeItem('pink_user');
                setLookupResult(null);
                setLookupName('');
                setLookupPhone('');
                setIsLogoutModalOpen(false);
            };

            const handleMonthChange = (increment) => {
                const newDate = new Date(currentMonth.getFullYear(), currentMonth.getMonth() + increment, 1);
                setCurrentMonth(newDate);
            };

            const handleDateClick = (day) => {
                const today = new Date(); today.setHours(0,0,0,0);
                const clickedDate = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day);
                if (clickedDate < today) return;
                
                if (!startDate || (startDate && endDate)) { 
                    setStartDate(clickedDate); 
                    setEndDate(null); 
                    setDateWarning(null); 
                } else {
                    let finalEndDate = new Date(clickedDate);
                    let warningMsg = null;

                    if (isHoliday(finalEndDate)) {
                        const originalDate = new Date(finalEndDate);
                        finalEndDate = getNextBusinessDay(finalEndDate);
                        warningMsg = `ë°˜ë‚©ì¼ì´ íœ´ì¼ì´ë¼ ${finalEndDate.getMonth() + 1}ì›” ${finalEndDate.getDate()}ì¼ë¡œ ìë™ ì—°ì¥ ë˜ì—ˆì–´ìš”!`;
                    }

                    const diffTime = Math.abs(finalEndDate - startDate); 
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;
                    
                    if (finalEndDate < startDate) { 
                        setStartDate(finalEndDate); 
                        setEndDate(null);
                        setDateWarning(null); 
                    }
                    else if (diffDays < 2) {
                        alert("ìµœì†Œ 1ë°• 2ì¼ ì´ìƒ ëŒ€ì—¬ ê°€ëŠ¥í•´ìš”!\n(ì˜ˆ: 1ì¼ ìˆ˜ë ¹ -> 2ì¼ ë°˜ë‚©)"); 
                    }
                    else {
                        setStartDate(startDate); 
                        setEndDate(finalEndDate); 
                        setDateWarning(warningMsg);
                    }
                }
            };

            const handleRentalStart = (method) => {
                if(method) setDeliveryMethod(method);
                else {
                    setDeliveryMethod(null);
                    setReturnMethod(null);
                }
                setViewMode('rental');
                setStep(1); 
                setActiveNav('rental'); 
            };

            const handleNavChange = (nav) => {
                setActiveNav(nav);
                if (nav === 'home') {
                    setViewMode('dashboard');
                } else if (nav === 'rental') {
                    handleRentalStart(); 
                }
            };

            // [ìˆ˜ì •1] ë©”ë‰´ ë³€ê²½ ì‹œì—ë„ ìŠ¤í¬ë¡¤ ìµœìƒë‹¨ ì´ë™ (activeNav ì˜ì¡´ì„± ì¶”ê°€)
            useEffect(() => { window.scrollTo(0, 0); }, [step, viewMode, activeNav]);
            
            const renderCalendarDays = () => {
                const today = new Date(); today.setHours(0,0,0,0);
                const year = currentMonth.getFullYear(); const month = currentMonth.getMonth();
                const days = new Date(year, month + 1, 0).getDate(); const firstDay = new Date(year, month, 1).getDay();
                const daysArray = [];

                let visualEndDate = endDate;
                if (endDate) {
                    visualEndDate = getReturnDate(endDate);
                }

                for (let i = 0; i < firstDay; i++) daysArray.push(<div key={`empty-${i}`} className="h-10"></div>);
                for (let d = 1; d <= days; d++) {
                    const thisDate = new Date(year, month, d);
                    const dayOfWeek = thisDate.getDay();
                    const dateKey = `${year}-${month + 1}-${d}`;
                    const holidayName = HOLIDAYS[dateKey];

                    let className = "h-14 flex flex-col items-center justify-center rounded-xl text-sm cursor-pointer transition-all border border-transparent ";
                    const isPast = thisDate < today;
                    const isStart = startDate && thisDate.getTime() === startDate.getTime();
                    
                    const isEnd = visualEndDate && thisDate.getTime() === visualEndDate.getTime();
                    const isInRange = startDate && visualEndDate && thisDate > startDate && thisDate < visualEndDate;
                    
                    if (isPast) {
                        className += "text-gray-300 cursor-not-allowed";
                    } else if (isStart || isEnd) {
                        className += "bg-rose-500 text-white font-bold shadow-md transform scale-105 z-10";
                    } else if (isInRange) {
                        className += "bg-rose-50 text-rose-700";
                    } else {
                        className += "hover:bg-gray-50 ";
                        if (holidayName || dayOfWeek === 0) className += "text-red-500 ";
                        else if (dayOfWeek === 6) className += "text-blue-500 ";
                        else className += "text-gray-700 ";
                    }

                    daysArray.push(
                        <div key={d} onClick={() => !isPast && handleDateClick(d)} className={className}>
                            <span className={isStart || isEnd ? "text-lg" : ""}>{d}</span>
                            {holidayName && !isStart && !isEnd && (
                                <span className="text-[9px] leading-none mt-0.5 truncate w-full text-center font-normal">{holidayName}</span>
                            )}
                        </div>
                    );
                }
                return daysArray;
            };

            const renderExtensionPage = () => {
                const extPricePerDay = extModel === 'galaxy' ? 15000 : 20000;
                const extTotal = extPricePerDay * extDays;

                return (
                <div className="animate-slide-in space-y-6">
                    <div className="flex items-center gap-3 mb-6">
                        <button onClick={() => setViewMode('dashboard')} className="p-2 bg-white rounded-full shadow-sm">
                            <Icons.ChevronLeft className="w-5 h-5 text-gray-600" />
                        </button>
                        <h2 className="text-xl font-bold text-gray-800">ëŒ€ì—¬ ê¸°ê°„ ì—°ì¥</h2>
                    </div>

                    <div className="bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                        <div className="w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4 text-blue-500">
                            <Icons.Clock size={32} />
                        </div>
                        <h3 className="text-lg font-bold text-gray-800 mb-2 text-center">ë°˜ë‚©ì¼ ì—°ì¥ ì‹ ì²­</h3>
                        
                        <div className="space-y-4 mt-6">
                            <div>
                                <label className="text-xs font-bold text-gray-500 ml-1">ê¸°ì¢… ì„ íƒ</label>
                                <div className="flex bg-gray-100 p-1 rounded-xl mt-1">
                                    <button onClick={() => setExtModel('galaxy')} className={`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${extModel === 'galaxy' ? 'bg-white text-gray-800 shadow-sm' : 'text-gray-400'}`}>ê°¤ëŸ­ì‹œ</button>
                                    <button onClick={() => setExtModel('iphone')} className={`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${extModel === 'iphone' ? 'bg-white text-gray-800 shadow-sm' : 'text-gray-400'}`}>ì•„ì´í°</button>
                                </div>
                                <p className="text-xs text-right mt-1 text-gray-400">{extModel === 'galaxy' ? '1ì¼ 15,000ì›' : '1ì¼ 20,000ì›'}</p>
                            </div>

                            <div>
                                <label className="text-xs font-bold text-gray-500 ml-1">ì—°ì¥ ê¸°ê°„</label>
                                <div className="flex items-center justify-between bg-gray-50 rounded-xl p-2 mt-1 border border-gray-100">
                                    <button onClick={() => setExtDays(Math.max(1, extDays - 1))} className="w-10 h-10 bg-white rounded-lg shadow-sm flex items-center justify-center text-gray-600 font-bold">-</button>
                                    <span className="font-bold text-gray-800">{extDays}ì¼</span>
                                    <button onClick={() => setExtDays(extDays + 1)} className="w-10 h-10 bg-white rounded-lg shadow-sm flex items-center justify-center text-gray-600 font-bold">+</button>
                                </div>
                            </div>

                            <div className="bg-gray-50 p-4 rounded-xl flex justify-between items-center">
                                <span className="font-bold text-gray-600">ì´ ì—°ì¥ ê¸ˆì•¡</span>
                                <span className="font-bold text-xl text-rose-500">{extTotal.toLocaleString()}ì›</span>
                            </div>

                            <div className="pt-2 border-t border-gray-100">
                                <p className="text-xs font-bold text-gray-500 mb-2">ì‹ ì²­ì ì •ë³´</p>
                                <div className="space-y-2">
                                    <input type="text" placeholder="ì„±í•¨" className="w-full p-3 bg-gray-50 rounded-xl outline-none text-sm" value={extForm.name} onChange={(e) => setExtForm({...extForm, name: e.target.value})} />
                                    <input type="text" placeholder="ì—°ë½ì²˜ (010-0000-0000)" className="w-full p-3 bg-gray-50 rounded-xl outline-none text-sm" value={extForm.phone} onChange={(e) => setExtForm({...extForm, phone: formatPhone(e.target.value)})} />
                                </div>
                            </div>
                        </div>
                        
                        <div className="bg-blue-50 p-3 rounded-xl text-left text-xs text-blue-600 mb-4 mt-4 leading-relaxed">
                            ë°˜ë‚©ì¼ ê¸°ì¤€ 24ì‹œê°„ ì „ê¹Œì§€ ì‹ ì²­ ê°€ëŠ¥í•©ë‹ˆë‹¤.<br/>
                            ì—°ì¥ ì‹ ì²­ í›„ ì…ê¸ˆì´ í™•ì¸ë˜ë©´ í™•ì •ë©ë‹ˆë‹¤.
                        </div>

                        <button 
                            disabled={isSubmitting}
                            onClick={() => handleExtensionSubmit(extTotal)}
                            className="w-full bg-blue-600 text-white py-4 rounded-xl font-bold shadow-md hover:bg-blue-700 transition-colors flex items-center justify-center gap-2"
                        >
                            {isSubmitting ? 'ì²˜ë¦¬ ì¤‘...' : 'ì—°ì¥ ì‹ ì²­í•˜ê¸°'}
                        </button>
                    </div>
                </div>
                );
            };

            const renderBackupPage = () => (
                <div className="animate-slide-in space-y-6">
                    <div className="flex items-center gap-3 mb-6">
                        <button onClick={() => setViewMode('dashboard')} className="p-2 bg-white rounded-full shadow-sm">
                            <Icons.ChevronLeft className="w-5 h-5 text-gray-600" />
                        </button>
                        <h2 className="text-xl font-bold text-gray-800">ë°ì´í„° ë°±ì—… ê°€ì´ë“œ</h2>
                    </div>

                    <div className="bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                        <div className="flex bg-gray-100 p-1 rounded-xl mb-6">
                            <button onClick={() => setBackupTab('samsung')} className={`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${backupTab === 'samsung' ? 'bg-white text-gray-800 shadow-sm' : 'text-gray-400'}`}>ì‚¼ì„± ê°¤ëŸ­ì‹œ</button>
                            <button onClick={() => setBackupTab('apple')} className={`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${backupTab === 'apple' ? 'bg-white text-gray-800 shadow-sm' : 'text-gray-400'}`}>ì• í”Œ ì•„ì´í°</button>
                        </div>

                        {backupTab === 'samsung' ? (
                            <div className="space-y-4 animate-fade-in">
                                <div className="flex flex-col items-center mb-4"><div className="w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center text-blue-600 mb-2"><Icons.Android size={24} /></div><h3 className="font-bold text-gray-800">Smart Switch ì‚¬ìš©í•˜ê¸°</h3></div>
                                <div className="space-y-3 text-sm text-gray-600">
                                    <div className="flex gap-3"><span className="w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center text-xs font-bold shrink-0">1</span><p>ìƒˆ ê¸°ê¸°ì™€ ê¸°ì¡´ ê¸°ê¸°ì— <strong>Smart Switch</strong> ì•±ì„ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰í•©ë‹ˆë‹¤.</p></div>
                                    <div className="flex gap-3"><span className="w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center text-xs font-bold shrink-0">2</span><p>'ë°ì´í„° ë³´ë‚´ê¸°'ì™€ 'ë°ì´í„° ë°›ê¸°'ë¥¼ ê°ê° ì„ íƒí•©ë‹ˆë‹¤.</p></div>
                                    <div className="flex gap-3"><span className="w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center text-xs font-bold shrink-0">3</span><p>ë¬´ì„  ì—°ê²° ë˜ëŠ” ì¼€ì´ë¸”ë¡œ ë‘ ê¸°ê¸°ë¥¼ ì—°ê²°í•˜ì—¬ ì „ì†¡í•©ë‹ˆë‹¤.</p></div>
                                </div>
                            </div>
                        ) : (
                            <div className="space-y-4 animate-fade-in">
                                <div className="flex flex-col items-center mb-4"><div className="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center text-gray-800 mb-2"><Icons.Apple size={24} /></div><h3 className="font-bold text-gray-800">ë§ˆì´ê·¸ë ˆì´ì…˜ ì‚¬ìš©í•˜ê¸°</h3></div>
                                <div className="space-y-3 text-sm text-gray-600">
                                    <div className="flex gap-3"><span className="w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center text-xs font-bold shrink-0">1</span><p>ìƒˆ ì•„ì´í°ì„ ì¼œê³  ê¸°ì¡´ ì•„ì´í° ì˜†ì— ë‘¡ë‹ˆë‹¤.</p></div>
                                    <div className="flex gap-3"><span className="w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center text-xs font-bold shrink-0">2</span><p>'ë¹ ë¥¸ ì‹œì‘' í™”ë©´ì´ ë‚˜íƒ€ë‚˜ë©´ Apple IDë¥¼ í™•ì¸í•˜ê³  ê³„ì†í•©ë‹ˆë‹¤.</p></div>
                                    <div className="flex gap-3"><span className="w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center text-xs font-bold shrink-0">3</span><p>ìƒˆ ê¸°ê¸°ì— ë‚˜íƒ€ë‚œ íŒ¨í„´ì„ ê¸°ì¡´ ê¸°ê¸° ì¹´ë©”ë¼ë¡œ ìŠ¤ìº”í•©ë‹ˆë‹¤.</p></div>
                                </div>
                            </div>
                        )}
                        
                        <div className="mt-8 pt-6 border-t border-gray-100">
                            <div className="bg-green-50 p-4 rounded-xl border border-green-100">
                                <div className="flex items-center gap-2 mb-2">
                                    <Icons.Cloud size={20} className="text-green-600" />
                                    <h4 className="font-bold text-green-800">ê·€ì°®ì€ ë°±ì—…, ëŒ€ì‹  í•´ë“œë ¤ìš”!</h4>
                                </div>
                                <p className="text-xs text-green-700 leading-relaxed mb-3">
                                    <strong>ë„¤ì´ë²„ ë§ˆì´ë°•ìŠ¤(MYBOX)</strong>ë¡œ ì•ˆì „í•˜ê²Œ ì˜®ê²¨ë“œë¦½ë‹ˆë‹¤.<br/>
                                    ë°˜ë‚© ì „ ë°ì´í„° ì‚­ì œê¹Œì§€ ì™„ë²½í•˜ê²Œ ì²˜ë¦¬í•´ë“œë ¤ìš”.
                                </p>
                                <div className="flex justify-between items-center bg-white p-3 rounded-lg mb-3">
                                    <span className="text-xs font-bold text-gray-600">ì´ìš© ìš”ê¸ˆ</span>
                                    <span className="text-sm font-bold text-green-600">10,000ì›</span>
                                </div>
                                
                                <div className="space-y-2 mb-3">
                                    <input type="text" placeholder="ì„±í•¨" className="w-full p-2 bg-white rounded-lg outline-none text-sm border border-green-100 placeholder-green-300" value={backupForm.name} onChange={(e) => setBackupForm({...backupForm, name: e.target.value})} />
                                    <input type="text" placeholder="ì—°ë½ì²˜" className="w-full p-2 bg-white rounded-lg outline-none text-sm border border-green-100 placeholder-green-300" value={backupForm.phone} onChange={(e) => setBackupForm({...backupForm, phone: formatPhone(e.target.value)})} />
                                </div>

                                <button 
                                    disabled={isSubmitting}
                                    onClick={handleBackupSubmit}
                                    className="w-full bg-green-600 text-white py-3 rounded-xl font-bold shadow-sm hover:bg-green-700 transition-colors flex items-center justify-center gap-2 text-sm"
                                >
                                    {isSubmitting ? 'ì²˜ë¦¬ ì¤‘...' : 'ë°ì´í„° ë°±ì—… ì‹ ì²­í•˜ê¸°'}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );

            const renderReviewsPage = () => {
                const tabs = [
                    { id: 'all', label: 'ì „ì²´' },
                    { id: 'ê°¤ëŸ­ì‹œ S23 ìš¸íŠ¸ë¼', label: 'S23U' },
                    { id: 'ê°¤ëŸ­ì‹œ S24 ìš¸íŠ¸ë¼', label: 'S24U' },
                    { id: 'ê°¤ëŸ­ì‹œ S25 ìš¸íŠ¸ë¼', label: 'S25U' },
                    { id: 'ì•„ì´í° 17 í”„ë¡œ', label: '17Pro' },
                    { id: 'ì•„ì´í° 17 í”„ë¡œë§¥ìŠ¤', label: '17Max' },
                ];

                const filteredReviews = activeReviewTab === 'all'
                    ? reviews
                    : reviews.filter(r => r.model === activeReviewTab);

                return (
                    <div className="animate-slide-in space-y-4 pb-24">
                         <div className="flex items-center gap-3 mb-2 px-1">
                            <button onClick={() => setViewMode('dashboard')} className="p-2 bg-white rounded-full shadow-sm">
                                <Icons.ChevronLeft className="w-5 h-5 text-gray-600" />
                            </button>
                            <h2 className="text-xl font-bold text-gray-800">ìƒìƒí•œ ë¦¬ì–¼ í›„ê¸°</h2>
                        </div>
                        
                        <div className="flex gap-2 overflow-x-auto pb-2 px-1 no-scrollbar">
                            {tabs.map(tab => (
                                <button 
                                    key={tab.id}
                                    onClick={() => setActiveReviewTab(tab.id)}
                                    className={`px-3 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${activeReviewTab === tab.id ? 'bg-gray-800 text-white' : 'bg-white text-gray-500 border border-gray-100'}`}
                                >
                                    {tab.label}
                                </button>
                            ))}
                        </div>

                        <div className="space-y-3 px-1">
                            {filteredReviews.length > 0 ? (
                                filteredReviews.map(review => (
                                    <div key={review.id} className="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                                        <div className="flex justify-between items-start mb-3">
                                            <div className="flex items-center gap-2">
                                                <span className="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm border border-white shadow-sm">ğŸ‘©</span>
                                                <div>
                                                    <p className="text-[10px] text-rose-500 font-bold">{review.model}</p>
                                                    <p className="font-bold text-gray-800 text-sm">{review.name}ë‹˜</p>
                                                </div>
                                            </div>
                                            <div className="flex text-yellow-400 gap-0.5">
                                                {[...Array(review.rating)].map((_, i) => <Icons.Star key={i} size={12} className="fill-current" />)}
                                            </div>
                                        </div>
                                        <p className="text-xs text-gray-600 leading-relaxed bg-gray-50 p-3 rounded-xl mb-2">"{review.text}"</p>
                                        <p className="text-[10px] text-gray-400 text-right">{review.date}</p>
                                    </div>
                                ))
                            ) : (
                                <div className="text-center py-20 text-gray-400">
                                    <p className="text-sm">ì•„ì§ ì‘ì„±ëœ í›„ê¸°ê°€ ì—†ì–´ìš” ğŸ˜¢</p>
                                </div>
                            )}
                        </div>
                    </div>
                );
            };
            
            const renderSuccessPage = () => {
                const type = successData ? successData.type : 'ì™„ë£Œ';
                const name = successData ? successData.name : 'ê³ ê°';
                const amount = successData ? successData.amount : 0;
                
                let titleMsg = "ì‹ ì²­ ì™„ë£Œ!";
                let statusMsg = "ì‹ ì²­ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.";
                
                if (type === 'ì˜ˆì•½') {
                    titleMsg = "ì˜ˆì•½ ì‹ ì²­ ì™„ë£Œ!";
                    statusMsg = "í˜„ì¬ ì˜ˆì•½ ëŒ€ê¸° ì¤‘ ìƒíƒœì…ë‹ˆë‹¤.";
                } else if (type === 'ì—°ì¥') {
                    titleMsg = "ì—°ì¥ ì‹ ì²­ ì™„ë£Œ!";
                    statusMsg = "ì…ê¸ˆ í™•ì¸ í›„ ì—°ì¥ì´ í™•ì •ë©ë‹ˆë‹¤.";
                } else if (type === 'ë°±ì—…') {
                    titleMsg = "ë°±ì—… ì‹ ì²­ ì™„ë£Œ!";
                    statusMsg = "ë‹´ë‹¹ìê°€ í™•ì¸ í›„ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.";
                }

                return (
                    <div className="animate-slide-in h-full flex flex-col justify-center items-center p-6 text-center">
                        <div className="w-24 h-24 bg-rose-100 rounded-full flex items-center justify-center mb-6 animate-bounce-in">
                            <Icons.Check size={48} className="text-rose-500" />
                        </div>
                        <h2 className="text-2xl font-bold text-gray-800 mb-2">{titleMsg}</h2>
                        <p className="text-gray-500 mb-8 leading-relaxed">
                            <span className="text-rose-500 font-bold">{name}</span>ë‹˜, {statusMsg}
                        </p>
                        
                        <div className="bg-gray-50 p-5 rounded-2xl w-full mb-6 border border-gray-100">
                            <div className="flex justify-between items-center mb-3 pb-3 border-b border-gray-200">
                                <span className="text-sm font-bold text-gray-600">ì…ê¸ˆí•˜ì‹¤ ê¸ˆì•¡</span>
                                <span className="text-lg font-bold text-rose-500">{amount.toLocaleString()}ì›</span>
                            </div>
                            <div className="flex justify-between items-center bg-white p-3 rounded-xl border border-gray-200">
                                <div className="text-left">
                                    <p className="text-[10px] text-gray-400 mb-0.5">ìš°ë¦¬ì€í–‰</p>
                                    <p className="text-sm font-bold text-gray-800">1002-000-000000</p>
                                </div>
                                <button onClick={() => copyToClipboard("1002000000000")} className="text-xs bg-gray-100 text-gray-600 px-3 py-1.5 rounded-lg font-bold hover:bg-gray-200">ë³µì‚¬</button>
                            </div>
                        </div>

                        <div className="bg-yellow-50 p-4 rounded-xl text-xs text-yellow-700 text-left w-full mb-8 leading-relaxed">
                            <strong>â³ ì•ˆë‚´ì‚¬í•­</strong><br/>
                            ì…ê¸ˆì´ í™•ì¸ë˜ë©´ í™•ì • ë¬¸ìê°€ ë°œì†¡ë©ë‹ˆë‹¤.<br/>
                            <span className="opacity-80">â€» ëŠ¦ì€ ë°¤ì´ë‚˜ ìƒˆë²½ì— ì‹ ì²­í•˜ì‹  ê²½ìš°, í™•ì • ì•ˆë‚´ê¹Œì§€ ì‹œê°„ì´ ë‹¤ì†Œ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
                        </div>
                        
                        {type === 'ì˜ˆì•½' && (
                            <div className="bg-gray-50 p-4 rounded-xl text-xs text-gray-500 text-left w-full mb-8 leading-relaxed">
                                <strong>ğŸ“¢ ìë™ ì·¨ì†Œ ì£¼ì˜</strong><br/>
                                1. ê²°ì œí•˜ì§€ ì•Šê³  ì˜ˆì•½ë§Œ ì§„í–‰í•œ ê²½ìš°<br/>
                                2. ì…ê¸ˆìëª…ê³¼ ì˜ˆì•½ìëª…ì´ ë‹¤ë¥¸ ê²½ìš°
                            </div>
                        )}

                        <button onClick={handleGoHome} className="w-full bg-rose-500 text-white py-4 rounded-xl font-bold shadow-lg hover:bg-rose-600 transition-colors">
                            í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
                        </button>
                    </div>
                );
            };

            return (
                <div className="min-h-screen flex justify-center font-sans">
                    <div className="w-full max-w-md bg-white shadow-xl min-h-screen relative pb-32">
                        
                        <header className="sticky top-0 z-50 bg-white/80 backdrop-blur-md px-5 py-4 flex justify-between items-center border-b border-gray-100">
                            <div className="flex items-center gap-2 cursor-pointer" onClick={() => handleNavChange('home')}>
                                <div className="w-8 h-8 bg-rose-500 rounded-lg flex items-center justify-center text-white font-bold">P</div>
                                <h1 className="text-lg font-bold text-gray-800 tracking-tight">í•‘í¬ë Œíƒˆ</h1>
                            </div>
                            <div className="text-xs text-gray-400 font-medium">1020 ì—¬ì„±ë“¤ì„ ìœ„í•œ í° ëŒ€ì—¬</div>
                        </header>

                        {(activeNav === 'home' || activeNav === 'rental') && (
                            <div className="p-5">
                                
                                {activeNav === 'home' && viewMode === 'dashboard' && (
                                    <div className="space-y-8 animate-slide-in pb-24">
                                        
                                        <div className="space-y-4">
                                            <div className="px-1 pt-2">
                                                <span className="inline-block px-2 py-0.5 rounded-full bg-rose-100 text-rose-500 text-[10px] font-bold mb-2">High Quality Rental</span>
                                                <h2 className="text-2xl font-bold text-gray-900 leading-snug">
                                                    ìµœì• ì˜ ìˆœê°„ì„ <br/>
                                                    <span className="text-rose-500">ê³ í™”ì§ˆë¡œ ì†Œì¥</span>í•˜ì„¸ìš” ğŸ“¸
                                                </h2>
                                            </div>

                                            <div onClick={() => handleRentalStart('post')} className="bg-gradient-to-r from-[#FF8E99] to-[#FF5F6D] rounded-3xl p-6 shadow-xl shadow-rose-200 cursor-pointer group relative overflow-hidden transition-transform hover:scale-[1.02]">
                                                <div className="absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full blur-2xl -mr-10 -mt-10"></div>
                                                <div className="absolute bottom-0 left-0 w-24 h-24 bg-yellow-300 opacity-20 rounded-full blur-xl -ml-5 -mb-5"></div>
                                                
                                                <div className="relative z-10 flex flex-col justify-between h-full min-h-[140px]">
                                                    <div>
                                                        <span className="text-white/90 text-xs font-medium tracking-wider">PREMIUM CAMERA</span>
                                                        <h3 className="text-white text-2xl font-bold mt-1 leading-tight">ì§€ê¸ˆ ë°”ë¡œ<br/>ëŒ€ì—¬í•˜ê¸°</h3>
                                                    </div>
                                                    <div className="flex justify-between items-end">
                                                        <span className="text-white/80 text-[11px] bg-white/20 px-2 py-1 rounded-lg backdrop-blur-sm">ê°¤ëŸ­ì‹œ / ì•„ì´í° ë³´ìœ  ì¤‘</span>
                                                        <div className="w-10 h-10 bg-white rounded-full flex items-center justify-center text-rose-500 shadow-sm group-hover:scale-110 transition-transform">
                                                            <Icons.ChevronLeft className="transform rotate-180 w-5 h-5" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                                            <div className="flex items-center gap-2 mb-4">
                                                <span className="text-xl">ğŸ”®</span>
                                                <h3 className="font-bold text-gray-800 text-base">ìš¸íŠ¸ë¼ ëŒ€ì—¬ ì–´ë–¤ ëª¨ë¸ë¡œ í•´ì•¼ í• ì§€ ê³ ë¯¼ë˜ë‚˜ìš”?</h3>
                                            </div>
                                            
                                            <div className="space-y-4">
                                                <div>
                                                    <label className="text-xs font-bold text-gray-500 ml-1 mb-1 block">ì–´ë””ì„œ ë³´ì‹œë‚˜ìš”?</label>
                                                    <div className="relative">
                                                        <select 
                                                            value={recVenue}
                                                            onChange={(e) => setRecVenue(e.target.value)}
                                                            className="w-full p-3 bg-gray-50 rounded-xl outline-none text-sm font-bold text-gray-800 appearance-none border border-transparent focus:border-rose-300 transition-colors custom-select"
                                                        >
                                                            <option value="KSPO DOME">KSPO DOME (ì²´ì¡°ê²½ê¸°ì¥)</option>
                                                            <option value="GOCHEOK">ê³ ì²™ ìŠ¤ì¹´ì´ë”</option>
                                                            <option value="JAMSIL">ì ì‹¤ ì£¼ê²½ê¸°ì¥</option>
                                                            <option value="INSPRIE">ì¸ìŠ¤íŒŒì´ì–´ ì•„ë ˆë‚˜</option>
                                                            <option value="OTHER">ê¸°íƒ€ ê³µì—°ì¥</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div>
                                                    <label className="text-xs font-bold text-gray-500 ml-1 mb-1 block">ì–´ëŠ ì¢Œì„ì¸ê°€ìš”?</label>
                                                    <div className="grid grid-cols-4 gap-2">
                                                        {['floor', '1f', '2f', '3f'].map((s) => (
                                                            <button 
                                                                key={s}
                                                                onClick={() => { setRecSeat(s); setRecResult(null); }}
                                                                className={`py-2 rounded-xl text-xs font-bold transition-all ${recSeat === s ? 'bg-rose-500 text-white shadow-md' : 'bg-gray-50 text-gray-400 hover:bg-gray-100'}`}
                                                            >
                                                                {s === 'floor' ? 'ìŠ¤íƒ ë”©' : s === '3f' ? '3ì¸µì´ìƒ' : `${s.toUpperCase()}ì¸µ`}
                                                            </button>
                                                        ))}
                                                    </div>
                                                </div>

                                                {!recResult ? (
                                                    <button 
                                                        onClick={handleRecommendation}
                                                        className="w-full bg-gray-900 text-white py-3.5 rounded-xl font-bold shadow-lg hover:bg-gray-800 transition-colors flex items-center justify-center gap-2 mt-2"
                                                    >
                                                        <Icons.Search size={16} /> ì¶”ì²œ ë°›ê¸°
                                                    </button>
                                                ) : (
                                                    <div className="mt-4 animate-fade-in">
                                                        <div className="bg-rose-50 p-5 rounded-2xl border border-rose-100 relative overflow-hidden">
                                                            <div className="absolute -right-4 -top-4 w-20 h-20 bg-white opacity-40 rounded-full blur-xl"></div>
                                                            <p className="text-xs text-rose-500 font-bold mb-1">í•‘í¬ë Œíƒˆì˜ ì¶”ì²œ!</p>
                                                            <h4 className="text-xl font-bold text-gray-800 mb-2 flex items-center gap-2">
                                                                {recResult.name}
                                                                <Icons.Android size={20} />
                                                            </h4>
                                                            <p className="text-xs text-gray-600 leading-relaxed bg-white/60 p-3 rounded-xl">
                                                                "{recResult.reason}"
                                                            </p>
                                                            <button 
                                                                onClick={() => handleRentalStart('post')}
                                                                className="w-full mt-3 bg-rose-500 text-white py-2.5 rounded-xl text-sm font-bold shadow-md hover:bg-rose-600 transition-colors"
                                                            >
                                                                ì´ ëª¨ë¸ë¡œ ì˜ˆì•½í•˜ê¸°
                                                            </button>
                                                        </div>
                                                        <button onClick={() => setRecResult(null)} className="text-xs text-gray-400 underline mt-3 w-full text-center">ë‹¤ì‹œ ì„ íƒí•˜ê¸°</button>
                                                    </div>
                                                )}
                                            </div>
                                        </div>

                                        {/* [ìˆ˜ì •] ì„œë¹„ìŠ¤ ë©”ë‰´ ê°€ë¡œ 1ì—´ ì •ë ¬ */}
                                        <div>
                                            <h3 className="font-bold text-gray-800 text-lg mb-4 px-1">ì„œë¹„ìŠ¤ ë°”ë¡œê°€ê¸°</h3>
                                            <div className="grid grid-cols-4 gap-2">
                                                <div onClick={() => setViewMode('extension')} className="bg-purple-50 p-3 rounded-2xl shadow-sm border border-purple-100 cursor-pointer hover:shadow-md transition-all group flex flex-col items-center justify-center text-center h-24">
                                                    <div className="w-8 h-8 bg-white rounded-full flex items-center justify-center text-purple-500 mb-1.5 shadow-sm group-hover:scale-110 transition-transform">
                                                        <Icons.Clock size={16} />
                                                    </div>
                                                    <h4 className="font-bold text-gray-800 text-xs">ê¸°ê°„ì—°ì¥</h4>
                                                </div>
                                                <div onClick={() => setViewMode('backup')} className="bg-orange-50 p-3 rounded-2xl shadow-sm border border-orange-100 cursor-pointer hover:shadow-md transition-all group flex flex-col items-center justify-center text-center h-24">
                                                    <div className="w-8 h-8 bg-white rounded-full flex items-center justify-center text-orange-500 mb-1.5 shadow-sm group-hover:scale-110 transition-transform">
                                                        <Icons.Cloud size={16} />
                                                    </div>
                                                    {/* [ìˆ˜ì •2] 'ë°±ì—…ëŒ€í–‰' -> 'ë°ì´í„° ë°±ì—…' ìœ¼ë¡œ í…ìŠ¤íŠ¸ ë³€ê²½ */}
                                                    <h4 className="font-bold text-gray-800 text-xs">ë°ì´í„° ë°±ì—…</h4>
                                                </div>
                                                <div onClick={() => handleNavChange('manual')} className="bg-green-50 p-3 rounded-2xl shadow-sm border border-green-100 cursor-pointer hover:shadow-md transition-all group flex flex-col items-center justify-center text-center h-24">
                                                    <div className="w-8 h-8 bg-white rounded-full flex items-center justify-center text-green-500 mb-1.5 shadow-sm group-hover:scale-110 transition-transform">
                                                        <Icons.BookOpen size={16} />
                                                    </div>
                                                    <h4 className="font-bold text-gray-800 text-xs">ì´ìš©ë°©ë²•</h4>
                                                </div>
                                                <div onClick={() => alert("ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.")} className="bg-blue-50 p-3 rounded-2xl shadow-sm border border-blue-100 cursor-pointer hover:shadow-md transition-all group flex flex-col items-center justify-center text-center h-24">
                                                    <div className="w-8 h-8 bg-white rounded-full flex items-center justify-center text-blue-500 mb-1.5 shadow-sm group-hover:scale-110 transition-transform">
                                                        <Icons.Headphones size={16} />
                                                    </div>
                                                    <h4 className="font-bold text-gray-800 text-xs">ê³ ê°ì„¼í„°</h4>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="mb-4">
                                            <div className="flex justify-between items-center mb-3 px-1">
                                                <h3 className="font-bold text-gray-800 text-lg">ğŸ’¬ ìƒìƒí•œ ë¦¬ì–¼ í›„ê¸°</h3>
                                                <button onClick={() => setViewMode('reviews')} className="text-xs text-gray-400 font-bold hover:text-rose-500 transition-colors">
                                                    ì „ì²´ë³´ê¸° &gt;
                                                </button>
                                            </div>
                                            {/* [ìˆ˜ì •3] ë¦¬ë·° 4ê°œ ë…¸ì¶œ, ê°€ë¡œ ìŠ¤í¬ë¡¤(ìŠ¤ì™€ì´í”„) ì ìš© */}
                                            <div className="flex gap-3 px-1 overflow-x-auto no-scrollbar pb-2">
                                                {reviews.slice(0, 4).map(review => (
                                                    <div key={review.id} className="min-w-[160px] max-w-[180px] bg-[#FFF5F6] p-4 rounded-3xl shadow-sm border border-rose-100 flex flex-col justify-between h-full hover:shadow-md transition-all">
                                                        <div>
                                                            <div className="flex flex-col items-start mb-2">
                                                                <span className="text-[10px] font-bold text-rose-500 bg-white border border-rose-100 px-1.5 py-0.5 rounded-md mb-1.5 shadow-sm">{review.model}</span>
                                                                <span className="text-xs font-bold text-gray-700">{review.name}ë‹˜</span>
                                                            </div>
                                                            <div className="bg-white/60 p-2.5 rounded-xl mb-2 border border-rose-50">
                                                                <p className="text-[11px] text-gray-600 leading-relaxed line-clamp-3">"{review.text}"</p>
                                                            </div>
                                                        </div>
                                                        <div className="flex justify-between items-center pt-1 border-t border-rose-100/50 mt-1">
                                                            <div className="flex text-yellow-400 gap-0.5">
                                                                {[...Array(review.rating)].map((_, i) => <Icons.Star key={i} size={11} className="fill-current" />)}
                                                            </div>
                                                            <span className="text-[9px] text-gray-400 font-medium">{review.date}</span>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                            <div className="text-right mt-3 px-1">
                                                <button onClick={() => setViewMode('reviews')} className="text-xs font-bold text-rose-500 bg-rose-50 border border-rose-100 rounded-full px-4 py-2 hover:bg-rose-100 transition-colors inline-flex items-center gap-1 shadow-sm">
                                                    ë¦¬ë·° ë” ë³´ê¸° <Icons.ChevronLeft className="transform rotate-180 w-3 h-3"/>
                                                </button>
                                            </div>
                                        </div>

                                        <div className="bg-gray-900 rounded-3xl p-5 shadow-lg flex items-center justify-between cursor-pointer group" onClick={() => alert("ë°˜ë‚© ì‹œ ë°ì´í„° ì´ˆê¸°í™” í•„ìˆ˜!")}>
                                            <div className="flex items-center gap-4">
                                                <div className="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center text-yellow-400 group-hover:rotate-12 transition-transform">
                                                    <Icons.Megaphone size={20} />
                                                </div>
                                                <div>
                                                    <p className="text-white font-bold text-sm">ë°˜ë‚© ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸</p>
                                                    <p className="text-gray-400 text-[10px] mt-0.5">ë°ì´í„° ë°±ì—… ë° ì´ˆê¸°í™” ë°©ë²•</p>
                                                </div>
                                            </div>
                                            <Icons.ArrowLeft className="transform rotate-180 text-gray-500 w-4 h-4" />
                                        </div>

                                    </div>
                                )}

                                {viewMode === 'extension' && renderExtensionPage()}
                                {viewMode === 'backup' && renderBackupPage()}
                                {viewMode === 'success' && renderSuccessPage()}
                                {viewMode === 'reviews' && renderReviewsPage()} 

                                {(viewMode === 'rental') && (
                                    <>
                                        <div className="flex gap-2 mb-6">
                                            {[1, 2, 3, 4].map(i => (<div key={i} className={`h-1 flex-1 rounded-full ${step >= i ? 'bg-rose-500' : 'bg-gray-200'}`}></div>))}
                                        </div>

                                        {step === 1 && (
                                            <div className="space-y-6 animate-slide-in">
                                                <div><h2 className="text-2xl font-bold text-gray-800 leading-tight">ì–´ë–¤ í°ìœ¼ë¡œ<br/><span className="text-rose-500">ì¸ìƒìƒ·</span> ë‚¨ê¸¸ê¹Œìš”? ğŸ“¸</h2></div>
                                                <div className="flex bg-gray-100 p-1 rounded-xl">
                                                    <button onClick={() => setActiveTab('galaxy')} className={`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${activeTab === 'galaxy' ? 'bg-white text-gray-800 shadow-sm' : 'text-gray-400'}`}>Galaxy</button>
                                                    <button onClick={() => setActiveTab('iphone')} className={`flex-1 py-2.5 rounded-lg text-sm font-bold transition-all ${activeTab === 'iphone' ? 'bg-white text-gray-800 shadow-sm' : 'text-gray-400'}`}>iPhone</button>
                                                </div>
                                                <div className="space-y-3">
                                                    {phones[activeTab].map(phone => (
                                                        <div key={phone.id} onClick={() => setSelectedPhone(phone)} className={`p-4 rounded-2xl border-2 transition-all cursor-pointer flex items-center justify-between ${selectedPhone?.id === phone.id ? 'border-rose-500 bg-rose-50' : 'border-transparent bg-white shadow-sm'}`}>
                                                            <div><span className="text-[10px] font-bold bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full mb-1 inline-block">{phone.tag}</span><h3 className="font-bold text-gray-800">{phone.name}</h3><p className="text-sm text-gray-500">1ì¼ {phone.price.toLocaleString()}ì›</p></div>
                                                            <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${selectedPhone?.id === phone.id ? 'border-rose-500' : 'border-gray-300'}`}>{selectedPhone?.id === phone.id && <div className="w-3 h-3 rounded-full bg-rose-500"></div>}</div>
                                                        </div>
                                                    ))}
                                                </div>
                                                {selectedPhone && (
                                                    <div className="animate-fade-in">
                                                        <h3 className="font-bold text-gray-800 mt-6 mb-2 flex items-center gap-2"><Icons.Calendar size={18} className="text-rose-500" /> ëŒ€ì—¬ ê¸°ê°„ ì„ íƒ</h3>
                                                        <div className="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 mt-4">
                                                            <div className="flex justify-between items-center mb-4">
                                                                <button onClick={() => handleMonthChange(-1)} className="p-1"><Icons.ChevronLeft size={20} className="text-gray-400" /></button>
                                                                <span className="font-bold text-gray-800">{currentMonth.getFullYear()}ë…„ {currentMonth.getMonth() + 1}ì›”</span>
                                                                <button onClick={() => handleMonthChange(1)} className="p-1 transform rotate-180"><Icons.ChevronLeft size={20} className="text-gray-400" /></button>
                                                            </div>
                                                            <div className="grid grid-cols-7 gap-1 text-center text-xs font-bold text-gray-400 mb-2"><div className="text-red-400">ì¼</div><div>ì›”</div><div>í™”</div><div>ìˆ˜</div><div>ëª©</div><div>ê¸ˆ</div><div className="text-blue-400">í† </div></div>
                                                            <div className="grid grid-cols-7 gap-y-2 gap-x-1">{renderCalendarDays()}</div>
                                                            <div className="mt-3 text-center text-xs text-rose-500 font-medium">* ìµœì†Œ 1ë°• 2ì¼ë¶€í„° ì„ íƒ ê°€ëŠ¥í•´ìš”</div>
                                                        </div>
                                                        {startDate && (
                                                            <div className="space-y-4 mt-4">
                                                                <div className="bg-rose-50 p-4 rounded-xl border border-rose-100 text-sm animate-fade-in">
                                                                    <div className="flex justify-between items-center mb-2">
                                                                        <span className="font-bold text-gray-600 flex items-center gap-1.5"><span className="text-lg">ğŸ“¦</span> ë„ì°©ì˜ˆì •ì¼</span>
                                                                        <span className="font-bold text-gray-800">
                                                                            {(() => {
                                                                                const arrival = getArrivalDate(startDate);
                                                                                return `${arrival.getMonth() + 1}ì›” ${arrival.getDate()}ì¼(${daysOfWeek[arrival.getDay()]})`;
                                                                            })()}
                                                                        </span>
                                                                    </div>
                                                                    <div className="flex justify-between items-center">
                                                                        <span className="font-bold text-gray-600 flex items-center gap-1.5"><span className="text-lg">ğŸ“®</span> ë°˜ë‚©ë°œì†¡ì¼</span>
                                                                        {endDate ? (
                                                                            <span className="font-bold text-rose-500">
                                                                                {(() => { 
                                                                                    const returnDate = getReturnDate(endDate); 
                                                                                    return `${returnDate.getMonth() + 1}ì›” ${returnDate.getDate()}ì¼(${daysOfWeek[returnDate.getDay()]})`; 
                                                                                })()}
                                                                            </span>
                                                                        ) : (
                                                                            <span className="font-bold text-rose-500 animate-pulse">ë°˜ë‚©ì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš” âœ¨</span>
                                                                        )}
                                                                    </div>
                                                                    <div className="text-[11px] text-gray-500 mt-3 pt-2 border-t border-rose-200/50 leading-relaxed">
                                                                        {dateWarning && <span className="text-rose-600 font-bold block mb-2 break-keep">âœ¨ {dateWarning}</span>}
                                                                        {isSundayOrHolidayStart && <span className="text-blue-600 font-bold block mb-2">ğŸš€ ì¼ìš”ì¼/ê³µíœ´ì¼ ìˆ˜ë ¹ì€ í€µ ì„œë¹„ìŠ¤ë§Œ ê°€ëŠ¥í•´ìš”!</span>}
                                                                        
                                                                        {discounts.app && <span className="text-rose-600 font-bold block mb-1">ğŸ ì•± ë¦¬ë·° ì•½ì†ìœ¼ë¡œ 3,000ì› í• ì¸ ì ìš©!</span>}
                                                                        {discounts.blog && <span className="text-green-600 font-bold block mb-1">ğŸ ë¸”ë¡œê·¸ ë¦¬ë·° ì•½ì†ìœ¼ë¡œ 5,000ì› í• ì¸ ì ìš©!</span>}
                                                                        {endDate ? (
                                                                            <span>* <strong>{endDate.getMonth() + 1}ì›” {endDate.getDate()}ì¼({daysOfWeek[endDate.getDay()]}) ì˜¤ì „ì¤‘ì— ì§‘ë°°ì›ë‹˜ê»˜ì„œ ë°©ë¬¸í•˜ì—¬ ìˆ˜ê±°í•  ì˜ˆì •ì…ë‹ˆë‹¤!</strong></span>
                                                                        ) : (
                                                                            <span className="text-gray-400">ì¢…ë£Œì¼ì„ ì„ íƒí•˜ë©´ ëŒ€ì—¬ ê¸°ê°„ê³¼ ìš”ê¸ˆì´ ê³„ì‚°ë©ë‹ˆë‹¤.</span>
                                                                        )}
                                                                    </div>
                                                                </div>

                                                                <div className="animate-fade-in">
                                                                    <h3 className="font-bold text-gray-800 mb-2 flex items-center gap-2 text-sm"><Icons.Gift size={16} className="text-rose-500"/>ë¦¬ë·° ì•½ì†í•˜ê³  í˜œíƒ ë°›ê¸°</h3>
                                                                    <div className="grid grid-cols-2 gap-2">
                                                                        <div onClick={() => setDiscounts({ app: !discounts.app, blog: false })} className={`p-3 rounded-xl border-2 cursor-pointer transition-all flex flex-col items-center justify-center text-center ${discounts.app ? 'border-rose-400 bg-rose-50' : 'border-gray-100 bg-white'}`}>
                                                                            <span className="text-xs font-bold text-gray-800 mb-1">ì•± ë¦¬ë·° ì•½ì†</span>
                                                                            <span className="text-[10px] text-rose-500 font-bold">3,000ì› í• ì¸</span>
                                                                        </div>
                                                                        <div onClick={() => setDiscounts({ app: false, blog: !discounts.blog })} className={`p-3 rounded-xl border-2 cursor-pointer transition-all flex flex-col items-center justify-center text-center ${discounts.blog ? 'border-green-400 bg-green-50' : 'border-gray-100 bg-white'}`}>
                                                                            <span className="text-xs font-bold text-gray-800 mb-1">ë¸”ë¡œê·¸ ë¦¬ë·° ì•½ì†</span>
                                                                            <span className="text-[10px] text-green-600 font-bold">5,000ì› í• ì¸</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        )}
                                                    </div>
                                                )}
                                            </div>
                                        )}
                                        
                                        {step === 2 && (
                                            <div className="space-y-8 animate-slide-in">
                                                <div><h2 className="text-2xl font-bold text-gray-800">ì•ˆì „í•˜ê³  í¸ë¦¬í•˜ê²Œ<br/>ì¤€ë¹„í•´ë“œë¦´ê²Œìš” ğŸ</h2></div>
                                                
                                                <div className="space-y-3">
                                                    <h3 className="font-bold text-gray-800 flex items-center gap-2"><Icons.Truck size={18} className="text-sky-500" /> ìˆ˜ë ¹ ë°©ë²•</h3>
                                                    <div onClick={() => { 
                                                        if (isSameDayStart) { alert("ë‹¹ì¼ ëŒ€ì—¬ëŠ” ìš°ì²´êµ­ íƒë°°ê°€ ë¶ˆê°€ëŠ¥í•´ìš”. í€µ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•´ì£¼ì„¸ìš”."); return; } 
                                                        if (isSundayOrHolidayStart) { alert("ì¼ìš”ì¼ ë° ê³µíœ´ì¼ ìˆ˜ë ¹ì€ í€µ ì„œë¹„ìŠ¤ë§Œ ê°€ëŠ¥í•´ìš”."); return; }
                                                        setDeliveryMethod(deliveryMethod === 'post' ? null : 'post'); 
                                                    }} className={`p-4 rounded-xl border-2 flex justify-between items-center cursor-pointer mb-2 transition-all ${deliveryMethod === 'post' ? 'border-sky-500 bg-sky-50' : 'border-gray-100 bg-white'} ${(isSameDayStart || isSundayOrHolidayStart) ? 'opacity-50 grayscale' : ''}`}>
                                                        <div className="flex items-center gap-3"><div className="w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center text-orange-600"><Icons.Truck size={20}/></div><div><p className={`font-bold ${(isSameDayStart || isSundayOrHolidayStart) ? 'text-gray-500' : 'text-gray-800'}`}>ìš°ì²´êµ­ íƒë°°</p><p className="text-xs text-gray-500">ê°€ì¥ ì•ˆì „í•˜ê³  ì €ë ´í•´ìš”</p></div></div><p className={`font-bold text-sm ${(isSameDayStart || isSundayOrHolidayStart) ? 'text-gray-500' : 'text-sky-500'}`}>{(isSameDayStart || isSundayOrHolidayStart) ? 'ë§ˆê°' : '+4,000ì›'}</p>
                                                    </div>
                                                    <div onClick={() => setDeliveryMethod(deliveryMethod === 'quick' ? null : 'quick')} className={`p-4 rounded-xl border-2 flex justify-between items-center cursor-pointer ${deliveryMethod === 'quick' ? 'border-sky-500 bg-sky-50' : 'border-gray-100 bg-white'}`}><div className="flex items-center gap-3"><div className="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600"><Icons.Zap size={20}/></div><div><p className="font-bold text-gray-800">í€µ ì„œë¹„ìŠ¤</p><p className="text-xs text-gray-500">ì„œìš¸/ê²½ê¸°/ì¸ì²œ ì§€ì—­ ë‹¹ì¼ ìˆ˜ë ¹</p></div></div><p className="text-gray-500 font-bold text-sm">ê±°ë¦¬ë¹„ë¡€(ì„ ë¶ˆ)</p></div>
                                                </div>

                                                <div className="space-y-3">
                                                    <h3 className="font-bold text-gray-800 flex items-center gap-2"><Icons.Truck size={18} className="text-rose-500 transform scale-x-[-1]" /> ë°˜ë‚© ë°©ë²•</h3>
                                                    <div onClick={() => setReturnMethod(returnMethod === 'pickup' ? null : 'pickup')} className={`p-4 rounded-xl border-2 flex justify-between items-center cursor-pointer transition-all ${returnMethod === 'pickup' ? 'border-rose-500 bg-rose-50' : 'border-gray-100 bg-white'}`}>
                                                        <div className="flex items-center gap-3">
                                                            <div className="w-10 h-10 rounded-full bg-rose-100 flex items-center justify-center text-rose-600">
                                                                <Icons.Truck size={20} className="transform scale-x-[-1]"/>
                                                            </div>
                                                            <div>
                                                                <p className="font-bold text-gray-800">ë°©ë¬¸ ìˆ˜ê±°</p>
                                                                <p className="text-xs text-gray-500">ê¸°ì‚¬ë‹˜ì´ ì§ì ‘ ë°©ë¬¸í•˜ì—¬ ìˆ˜ê±°</p>
                                                            </div>
                                                        </div>
                                                        <p className="font-bold text-sm text-rose-500">+4,000ì›</p>
                                                    </div>
                                                </div>

                                                <div className="space-y-3">
                                                    <h3 className="font-bold text-gray-800 flex items-center gap-2"><Icons.ShieldCheck size={18} className="text-green-500" /> íŒŒì† ë³´í—˜ (í•„ìˆ˜)</h3>
                                                    <div className="grid grid-cols-3 gap-2">
                                                        <div onClick={() => setInsurance('none')} className={`p-3 rounded-xl border-2 cursor-pointer text-center flex flex-col justify-between h-28 transition-all ${insurance === 'none' ? 'border-green-500 bg-green-50' : 'border-gray-100 bg-white'}`}><div className="flex flex-col items-center"><p className="font-bold text-gray-800 text-sm mb-1">ë¯¸ê°€ì…</p><p className="text-[10px] text-gray-500 leading-tight">íŒŒì† ì‹œ<br/>ê³ ê°ë¶€ë‹´ê¸ˆ<br/>100%</p></div><p className="text-gray-500 font-bold text-xs mt-1">+0ì›</p></div>
                                                        <div onClick={() => setInsurance('basic')} className={`p-3 rounded-xl border-2 cursor-pointer text-center flex flex-col justify-between h-28 transition-all ${insurance === 'basic' ? 'border-green-500 bg-green-50' : 'border-gray-100 bg-white'}`}><div className="flex flex-col items-center"><p className="font-bold text-gray-800 text-sm mb-1">ë² ì´ì§</p><p className="text-[10px] text-gray-500 leading-tight">íŒŒì† ì‹œ<br/>ê³ ê°ë¶€ë‹´ê¸ˆ<br/>50%</p></div><p className="text-green-600 font-bold text-xs mt-1">+3,000ì›</p></div>
                                                        <div onClick={() => setInsurance('premium')} className={`p-3 rounded-xl border-2 cursor-pointer text-center flex flex-col justify-between h-28 transition-all ${insurance === 'premium' ? 'border-green-500 bg-green-50' : 'border-gray-100 bg-white'}`}><div className="flex flex-col items-center"><p className="font-bold text-gray-800 text-sm mb-1">í”„ë¦¬ë¯¸ì—„</p><p className="text-[10px] text-gray-500 leading-tight">íŒŒì† ì‹œ<br/>ê³ ê°ë¶€ë‹´ê¸ˆ<br/>30%</p></div><p className="text-green-600 font-bold text-xs mt-1">+5,000ì›</p></div>
                                                    </div>
                                                </div>

                                                <div className="space-y-3">
                                                    <h3 className="font-bold text-gray-800 flex items-center gap-2"><Icons.Zap size={18} className="text-yellow-500" /> ì¶”ê°€ ì„œë¹„ìŠ¤</h3>
                                                    
                                                    <div onClick={() => setBatteryCount(batteryCount === 0 ? 1 : 0)} className={`p-4 rounded-xl border-2 flex justify-between items-center cursor-pointer transition-all mb-2 ${batteryCount > 0 ? 'border-yellow-400 bg-yellow-50' : 'border-gray-100 bg-white'}`}>
                                                        <div className="flex items-center gap-3"><div className={`w-10 h-10 rounded-full flex items-center justify-center ${batteryCount > 0 ? 'bg-yellow-100 text-yellow-600' : 'bg-gray-100 text-gray-400'}`}><Icons.Zap size={20} className={batteryCount > 0 ? 'fill-yellow-400 text-yellow-500' : 'text-gray-600'} /></div><div><p className="font-bold text-gray-800">ë³´ì¡°ë°°í„°ë¦¬ ì¶”ê°€</p><p className="text-xs text-gray-500">Cíƒ€ì… 5000mAh (1ê°œ)</p></div></div>
                                                        <div className="flex items-center gap-2"><p className={`font-bold text-sm ${batteryCount > 0 ? 'text-yellow-600' : 'text-gray-500'}`}>+3,000ì›</p>{batteryCount > 0 && <Icons.CheckCircle size={18} className="text-yellow-500" />}</div>
                                                    </div>

                                                    <div onClick={() => setDataBackup(!dataBackup)} className={`p-4 rounded-xl border-2 flex justify-between items-center cursor-pointer transition-all ${dataBackup ? 'border-blue-500 bg-blue-50' : 'border-gray-100 bg-white'}`}>
                                                        <div className="flex items-center gap-3">
                                                            <div className={`w-10 h-10 rounded-full flex items-center justify-center ${dataBackup ? 'bg-blue-100 text-blue-600' : 'bg-gray-100 text-gray-400'}`}>
                                                                <Icons.Cloud size={20} className={dataBackup ? 'text-blue-600' : 'text-gray-600'} />
                                                            </div>
                                                            <div>
                                                                <p className="font-bold text-gray-800">ë°ì´í„° ë°±ì—… ëŒ€í–‰</p>
                                                                <p className="text-xs text-gray-500">ë„¤ì´ë²„ ë§ˆì´ë°•ìŠ¤ë¡œ ì•ˆì „í•˜ê²Œ ì´ë™</p>
                                                            </div>
                                                        </div>
                                                        <div className="flex items-center gap-2">
                                                            <p className={`font-bold text-sm ${dataBackup ? 'text-blue-600' : 'text-gray-500'}`}>+10,000ì›</p>
                                                            {dataBackup && <Icons.CheckCircle size={18} className="text-blue-500" />}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        {step === 3 && (
                                            <div className="space-y-6 animate-slide-in pb-10">
                                                <div><h2 className="text-2xl font-bold text-gray-800">ë§ˆì§€ë§‰ìœ¼ë¡œ<br/>ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš” ğŸ“</h2></div>
                                                <div className="bg-white p-5 rounded-2xl shadow-sm border border-gray-100 space-y-4">
                                                    <div><label className="text-xs font-bold text-gray-500 ml-1">ë°›ìœ¼ì‹œëŠ” ë¶„ ì„±í•¨</label><div className="flex items-center bg-gray-50 rounded-xl px-3 mt-1"><Icons.User size={18} className="text-gray-400" /><input type="text" className="w-full p-3 bg-transparent outline-none text-gray-800" placeholder="í™ê¸¸ë™" value={userInfo.name} onChange={(e) => setUserInfo({...userInfo, name: e.target.value})} /></div></div>
                                                    <div><label className="text-xs font-bold text-gray-500 ml-1">ì—°ë½ì²˜</label><div className="flex items-center bg-gray-50 rounded-xl px-3 mt-1"><Icons.Phone size={18} className="text-gray-400" /><input type="text" className="w-full p-3 bg-transparent outline-none text-gray-800" placeholder="010-0000-0000" value={userInfo.phone} onChange={(e) => setUserInfo({...userInfo, phone: formatPhone(e.target.value)})} /></div></div>
                                                    
                                                    <div><label className="text-xs font-bold text-gray-500 ml-1">ì¼ì •ëª…</label><div className="flex items-center bg-gray-50 rounded-xl px-3 mt-1"><Icons.Ticket size={18} className="text-gray-400" /><input type="text" className="w-full p-3 bg-transparent outline-none text-gray-800" placeholder="ì˜ˆ) ì—”ì‹œí‹° ì½˜ì„œíŠ¸" value={userInfo.scheduleName} onChange={(e) => setUserInfo({...userInfo, scheduleName: e.target.value})} /></div></div>

                                                    <div>
                                                        <label className="text-xs font-bold text-gray-500 ml-1">ì£¼ì†Œ</label>
                                                        <div className="flex gap-2 mt-1">
                                                            <input 
                                                                type="text" 
                                                                placeholder="ìš°í¸ë²ˆí˜¸" 
                                                                readOnly={!isManualAddress} 
                                                                value={userInfo.zipcode} 
                                                                onChange={(e) => setUserInfo({...userInfo, zipcode: e.target.value})}
                                                                className={`w-1/3 p-3 rounded-xl outline-none text-sm text-center transition-colors ${isManualAddress ? 'bg-white border border-gray-300 text-gray-800' : 'bg-gray-100 text-gray-500'}`} 
                                                            />
                                                            <button 
                                                                onClick={handleAddressSearch} 
                                                                className="w-2/3 bg-gray-800 text-white rounded-xl text-sm font-bold shadow-sm hover:bg-gray-700"
                                                            >
                                                                ì£¼ì†Œ ê²€ìƒ‰
                                                            </button>
                                                        </div>
                                                        
                                                        <div className={`flex items-center rounded-xl px-3 mt-2 transition-colors ${isManualAddress ? 'bg-white border border-gray-300' : 'bg-gray-50'}`}>
                                                            <Icons.MapPin size={18} className="text-gray-400" />
                                                            <input 
                                                                type="text" 
                                                                className="w-full p-3 bg-transparent outline-none text-gray-800" 
                                                                placeholder="ê¸°ë³¸ ì£¼ì†Œ" 
                                                                readOnly={!isManualAddress} 
                                                                value={userInfo.address} 
                                                                onClick={!isManualAddress ? handleAddressSearch : undefined}
                                                                onChange={(e) => setUserInfo({...userInfo, address: e.target.value})}
                                                            />
                                                        </div>
                                                        
                                                        <div className="mt-2">
                                                            <input 
                                                                type="text" 
                                                                className="w-full p-3 bg-white border border-gray-200 rounded-xl outline-none text-gray-800 focus:border-rose-300" 
                                                                placeholder="ìƒì„¸ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" 
                                                                value={userInfo.detailAddress} 
                                                                onChange={(e) => setUserInfo({...userInfo, detailAddress: e.target.value})} 
                                                            />
                                                        </div>

                                                        <div className="text-right mt-2">
                                                            <button 
                                                                onClick={() => setIsManualAddress(!isManualAddress)} 
                                                                className="text-xs text-gray-400 underline hover:text-gray-600"
                                                            >
                                                                {isManualAddress ? "ë‹¤ì‹œ ì£¼ì†Œ ê²€ìƒ‰ ì‚¬ìš©í•˜ê¸°" : "ì£¼ì†Œ ê²€ìƒ‰ì´ ì•ˆ ë˜ì‹œë‚˜ìš”? (ì§ì ‘ ì…ë ¥)"}
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        {step === 4 && (
                                            <div className="space-y-6 animate-slide-in pb-10">
                                                <div><h2 className="text-2xl font-bold text-gray-800">ë§ˆì§€ë§‰ìœ¼ë¡œ<br/>ì˜ˆì•½ ë‚´ìš©ì„ í™•ì¸í•´ì£¼ì„¸ìš” âœ…</h2></div>
                                                
                                                <div className="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                                                    <h3 className="font-bold text-gray-800 mb-3 pb-2 border-b border-gray-100 text-sm">ì˜ˆì•½ì ì •ë³´</h3>
                                                    <div className="space-y-2 text-sm text-gray-600">
                                                        <div className="flex justify-between"><span className="text-gray-400 text-xs">ë°›ìœ¼ì‹œëŠ” ë¶„</span><span className="font-medium text-gray-800">{userInfo.name}</span></div>
                                                        <div className="flex justify-between"><span className="text-gray-400 text-xs">ì—°ë½ì²˜</span><span className="font-medium text-gray-800">{userInfo.phone}</span></div>
                                                        <div className="flex justify-between"><span className="text-gray-400 text-xs">ì¼ì •ëª…</span><span className="font-medium text-gray-800">{userInfo.scheduleName}</span></div>
                                                        <div className="flex flex-col mt-1">
                                                            <span className="text-gray-400 text-xs mb-1">ì£¼ì†Œ</span>
                                                            <span className="font-medium text-gray-800 text-right leading-tight break-keep">{userInfo.address} {userInfo.detailAddress}</span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div className="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                                                    <h3 className="font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100">ê²°ì œ ìƒì„¸</h3>
                                                    <div className="space-y-2 text-sm text-gray-600">
                                                        <div className="flex justify-between"><span>{selectedPhone.name} ({calculateDays()}ì¼)</span><span>{(selectedPhone.price * calculateDays()).toLocaleString()}ì›</span></div>
                                                        <div className="flex justify-between"><span>íŒŒì†ë³´í—˜ ({insurance === 'basic' ? 'ë² ì´ì§' : (insurance === 'premium' ? 'í”„ë¦¬ë¯¸ì—„' : 'ë¯¸ê°€ì…')})</span><span>+{insurance === 'basic' ? '3,000' : (insurance === 'premium' ? '5,000' : '0')}ì›</span></div>
                                                        {batteryCount > 0 && <div className="flex justify-between"><span>ë³´ì¡°ë°°í„°ë¦¬ ({batteryCount}ê°œ)</span><span>+{(batteryCount * 3000).toLocaleString()}ì›</span></div>}
                                                        {dataBackup && <div className="flex justify-between"><span>ë°ì´í„° ë°±ì—… ëŒ€í–‰</span><span>+10,000ì›</span></div>}
                                                        {deliveryMethod === 'post' && <div className="flex justify-between"><span>ìš°ì²´êµ­ íƒë°°ë¹„</span><span>+4,000ì›</span></div>}
                                                        {returnMethod === 'pickup' && <div className="flex justify-between"><span>ë°˜ë‚© ë°©ë¬¸ìˆ˜ê±°</span><span>+4,000ì›</span></div>}
                                                        {discounts.app && <div className="flex justify-between text-rose-500 font-bold"><span>ì´ë²¤íŠ¸ í• ì¸ (ì•± ë¦¬ë·°)</span><span>-3,000ì›</span></div>}
                                                        {discounts.blog && <div className="flex justify-between text-green-500 font-bold"><span>ì´ë²¤íŠ¸ í• ì¸ (ë¸”ë¡œê·¸)</span><span>-5,000ì›</span></div>}
                                                    </div>
                                                    <div className="mt-4 pt-4 border-t border-gray-100 flex justify-between items-center"><span className="font-bold text-gray-800">ìµœì¢… ê²°ì œ ê¸ˆì•¡</span><span className="font-bold text-2xl text-rose-500">{calculateTotal().toLocaleString()}ì›</span></div>
                                                </div>

                                                <div className="bg-gray-100 p-4 rounded-xl">
                                                     <div className="flex justify-between items-center mb-1">
                                                        <p className="text-xs text-gray-500 font-bold flex items-center gap-1"><Icons.CreditCard size={14} /> ê²°ì œìˆ˜ë‹¨ (ë¬´í†µì¥ ì…ê¸ˆ)</p>
                                                        <button onClick={() => copyToClipboard("1002000000000")} className="text-[10px] bg-white border border-gray-200 text-gray-600 px-2 py-1 rounded flex items-center gap-1 hover:bg-yellow-100">
                                                            <Icons.Copy size={10} /> ê³„ì¢Œ ë³µì‚¬
                                                        </button>
                                                    </div>
                                                    <p className="text-base font-bold text-gray-800 mt-1">ìš°ë¦¬ì€í–‰ 1002-000-000000</p>
                                                    <p className="text-xs text-gray-500 mt-0.5">ì˜ˆê¸ˆì£¼: í•‘í¬ë Œíƒˆ</p>
                                                </div>

                                                <div className="bg-rose-50 p-4 rounded-xl text-xs text-rose-600 leading-relaxed border border-rose-100">
                                                    <strong>ğŸ“¢ ì˜ˆì•½ ì·¨ì†Œ ì•ˆë‚´</strong><br/>
                                                    ë‹¤ìŒì˜ ê²½ìš° ì˜ˆì•½ì´ ìë™ìœ¼ë¡œ ì·¨ì†Œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br/>
                                                    <span className="text-rose-500/80 pl-2 block mt-1">â€¢ ê²°ì œí•˜ì§€ ì•Šê³  ì˜ˆì•½ë§Œ ì§„í–‰í•œ ê²½ìš°</span>
                                                    <span className="text-rose-500/80 pl-2 block">â€¢ ì…ê¸ˆìëª…ê³¼ ì˜ˆì•½ìëª…ì´ ë‹¤ë¥¸ ê²½ìš°</span>
                                                </div>
                                            </div>
                                        )}

                                        <div className="mt-10 w-full max-w-md mx-auto pt-6"> 
                                            {selectedPhone && step > 0 && step <= 4 && (
                                                <div className="px-6 mb-3 animate-slide-in-up">
                                                    <div className="bg-rose-400 rounded-full py-4 px-6 shadow-xl flex justify-between items-center border border-rose-300/50 ring-2 ring-rose-100/50">
                                                        <div className="flex flex-col justify-center">
                                                            {startDate && endDate ? (
                                                                <>
                                                                    <span className="text-xs text-rose-100 leading-none mb-1">ì„ íƒí•œ ë‚ ì§œ</span>
                                                                    <span className="text-sm text-white font-bold tracking-tight leading-none drop-shadow-sm">
                                                                        {(() => {
                                                                            const returnDate = getReturnDate(endDate);
                                                                            return `${startDate.getMonth() + 1}.${startDate.getDate()} ~ ${returnDate.getMonth() + 1}.${returnDate.getDate()}`;
                                                                        })()}
                                                                    </span>
                                                                </>
                                                            ) : (
                                                                <span className="text-xs text-rose-100 font-medium">ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</span>
                                                            )}
                                                        </div>
                                                        <div className="flex items-center gap-2">
                                                            {startDate && endDate && <span className={`text-[10px] px-2 py-0.5 rounded-full font-bold transition-colors ${step === 1 ? 'bg-white/20 text-white' : 'bg-white text-rose-500 shadow-sm'}`}>{calculateDays()}ì¼</span>}
                                                            <span className="text-xl font-bold text-white tracking-tight drop-shadow-sm">{calculateTotal().toLocaleString()}ì›</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            )}

                                            <div className="px-4 pb-4 flex gap-2">
                                                {step > 1 && <button onClick={() => setStep(step - 1)} className="flex-1 py-4 text-lg rounded-xl bg-white border border-gray-200 shadow-lg text-gray-600 font-bold active:scale-95 transition-all">ì´ì „</button>}
                                                <button disabled={isSubmitting} onClick={() => {
                                                    if (step === 1 && (!startDate || !endDate)) { alert("ëŒ€ì—¬ ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”!"); return; }
                                                    if (step === 2) { 
                                                        if (!deliveryMethod) { alert("ìˆ˜ë ¹ ë°©ë²•ì„ ì„ íƒí•´ì£¼ì„¸ìš”!"); return; }
                                                        if (!returnMethod) { alert("ë°˜ë‚© ë°©ë²•ì„ ì„ íƒí•´ì£¼ì„¸ìš”!"); return; }
                                                        if (!insurance) { alert("íŒŒì† ë³´í—˜ ê°€ì… ì—¬ë¶€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!"); return; } 
                                                    }
                                                    if (step === 3) { if(!userInfo.name || !userInfo.phone || !userInfo.address) { alert("ì˜ˆì•½ì ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!"); return; } }
                                                    if (step === 4) { handleSubmit(); return; }
                                                    setStep(step + 1);
                                                }} className="flex-1 py-4 text-lg rounded-xl bg-rose-500 text-white font-bold shadow-lg active:scale-95 transition-all flex justify-center items-center gap-2 hover:bg-rose-600">{isSubmitting ? 'ì²˜ë¦¬ ì¤‘...' : (step === 4 ? 'ì…ê¸ˆí•˜ê³  ì˜ˆì•½í•˜ê¸°' : 'ë‹¤ìŒìœ¼ë¡œ')}</button>
                                            </div>
                                        </div>
                                    </>
                                )}
                            </div>
                        )}

                        {activeNav === 'my' && (
                            <div className="p-5 animate-fade-in pb-24 h-full flex flex-col bg-gray-50/50">
                                {!lookupResult ? (
                                    <div className="flex-1 flex flex-col justify-center max-w-sm mx-auto w-full">
                                        <div className="text-center mb-6"> 
                                            <h2 className="text-xl font-bold text-gray-800">ì˜ˆì•½ ì¡°íšŒ</h2>
                                            <p className="text-xs text-gray-500 mt-1">ì˜ˆì•½ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?</p>
                                        </div>

                                        <div className="grid grid-cols-2 gap-3 mb-6">
                                            <button onClick={() => handleNavChange('manual')} className="bg-white border border-gray-100 p-3 rounded-2xl shadow-sm hover:bg-blue-50 transition-colors flex flex-col items-center justify-center gap-1 group">
                                                <div className="w-8 h-8 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center mb-1 group-hover:bg-white group-hover:shadow-sm transition-all">
                                                    <Icons.BookOpen size={16} />
                                                </div>
                                                <span className="text-xs font-bold text-gray-700">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</span>
                                            </button>
                                            
                                            <button onClick={() => alert("ì¹´ì¹´ì˜¤í†¡ ìƒë‹´ìœ¼ë¡œ ì—°ê²°ë©ë‹ˆë‹¤.")} className="bg-white border border-gray-100 p-3 rounded-2xl shadow-sm hover:bg-yellow-50 transition-colors flex flex-col items-center justify-center gap-1 group">
                                                <div className="w-8 h-8 bg-yellow-50 text-yellow-600 rounded-full flex items-center justify-center mb-1 group-hover:bg-white group-hover:shadow-sm transition-all">
                                                    <Icons.MessageCircle size={18} />
                                                </div>
                                                <span className="text-xs font-bold text-gray-700">1:1 ë¬¸ì˜í•˜ê¸°</span>
                                            </button>
                                        </div>

                                        <div className="bg-white p-6 rounded-3xl shadow-lg border border-rose-100/50 space-y-5">
                                            <div className="space-y-1.5">
                                                <label className="text-xs font-bold text-gray-400 ml-1">ì´ë¦„</label>
                                                <div className="flex items-center bg-gray-50 rounded-xl px-4 border border-gray-100 focus-within:border-rose-300 focus-within:bg-white transition-all">
                                                    <Icons.User size={18} className="text-gray-400" />
                                                    <input type="text" placeholder="ì˜ˆì•½ì ì„±í•¨" className="w-full p-3.5 bg-transparent outline-none text-gray-800 text-sm font-medium" value={lookupName} onChange={(e) => setLookupName(e.target.value)} />
                                                </div>
                                            </div>
                                            <div className="space-y-1.5">
                                                <label className="text-xs font-bold text-gray-400 ml-1">íœ´ëŒ€í° ë²ˆí˜¸</label>
                                                <div className="flex items-center bg-gray-50 rounded-xl px-4 border border-gray-100 focus-within:border-rose-300 focus-within:bg-white transition-all">
                                                    <Icons.Phone size={18} className="text-gray-400" />
                                                    <input type="text" placeholder="010-0000-0000" className="w-full p-3.5 bg-transparent outline-none text-gray-800 text-sm font-medium" value={lookupPhone} onChange={(e) => setLookupPhone(formatPhone(e.target.value))} />
                                                </div>
                                            </div>
                                            
                                            {/* [ìˆ˜ì •] ë‚´ ì •ë³´ ê¸°ì–µí•˜ê¸° ì²´í¬ë°•ìŠ¤ ì œê±° */}

                                            <button onClick={() => handleLookup()} disabled={isSearching} className="w-full bg-rose-500 text-white py-4 rounded-2xl font-bold shadow-lg shadow-rose-200 hover:bg-rose-600 transition-all active:scale-95 flex justify-center items-center gap-2">
                                                {isSearching ? <span className="animate-spin-slow"><Icons.RefreshCw size={18}/></span> : 'ì¡°íšŒí•˜ê¸°'}
                                            </button>
                                        </div>
                                    </div>
                                ) : (
                                    <div>
                                        <div className="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 mb-4 flex justify-between items-center">
                                            <div>
                                                <div className="flex items-baseline gap-1">
                                                    <span className="text-lg font-bold text-gray-800">{lookupName}ë‹˜</span>
                                                    <span className="text-xs text-gray-500">ë°˜ê°€ì›Œìš”! ğŸŒ¸</span>
                                                </div>
                                            </div>
                                            <div className="flex gap-2">
                                                <button onClick={handleRefresh} className="text-[10px] text-gray-500 bg-gray-50 border border-gray-200 px-2 py-1.5 rounded-lg hover:bg-gray-100 transition-colors flex items-center gap-1">
                                                    <Icons.RefreshCw size={10} /> ìƒˆë¡œê³ ì¹¨
                                                </button>
                                                <button onClick={handleLogoutClick} className="text-[10px] text-gray-400 border border-gray-200 px-2 py-1.5 rounded-lg hover:bg-gray-100 transition-colors">ë¡œê·¸ì•„ì›ƒ</button>
                                            </div>
                                        </div>

                                        <div className="grid grid-cols-2 gap-3 mb-6">
                                            <button onClick={() => handleNavChange('manual')} className="bg-white border border-gray-100 p-3 rounded-2xl shadow-sm hover:bg-blue-50 transition-colors flex flex-col items-center justify-center gap-1 group">
                                                <div className="w-8 h-8 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center mb-1 group-hover:bg-white group-hover:shadow-sm transition-all">
                                                    <Icons.BookOpen size={16} />
                                                </div>
                                                <span className="text-xs font-bold text-gray-700">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</span>
                                            </button>
                                            
                                            <button onClick={() => alert("ì¹´ì¹´ì˜¤í†¡ ìƒë‹´ìœ¼ë¡œ ì—°ê²°ë©ë‹ˆë‹¤.")} className="bg-white border border-gray-100 p-3 rounded-2xl shadow-sm hover:bg-yellow-50 transition-colors flex flex-col items-center justify-center gap-1 group">
                                                <div className="w-8 h-8 bg-yellow-50 text-yellow-600 rounded-full flex items-center justify-center mb-1 group-hover:bg-white group-hover:shadow-sm transition-all">
                                                    <Icons.MessageCircle size={18} />
                                                </div>
                                                <span className="text-xs font-bold text-gray-700">1:1 ë¬¸ì˜í•˜ê¸°</span>
                                            </button>
                                        </div>

                                        <div className="bg-white p-5 rounded-2xl shadow-lg border border-rose-100">
                                            <h3 className="text-base font-bold text-gray-800 mb-3 px-1 flex items-center gap-1">
                                                ğŸ“‹ ì‹ ì²­ ë‚´ì—­
                                                {lookupResult && <span className="text-[10px] font-normal text-gray-400 bg-gray-100 px-1.5 py-0.5 rounded-full">{lookupResult.length}</span>}
                                            </h3>
                                            
                                            {isSearching && (
                                                <div className="absolute inset-0 bg-white/70 flex items-center justify-center z-10 rounded-2xl">
                                                    <div className="w-8 h-8 border-4 border-rose-200 border-t-rose-500 rounded-full animate-spin-slow"></div>
                                                </div>
                                            )}

                                            <div className={`space-y-3 transition-opacity duration-200 ${isSearching ? 'opacity-50' : 'opacity-100'}`}>
                                                {(() => {
                                                    if (!lookupResult || lookupResult.length === 0) {
                                                        return <div className="text-center py-12 flex flex-col items-center justify-center text-gray-400">
                                                            <div className="w-12 h-12 bg-gray-50 rounded-full flex items-center justify-center mb-3 text-2xl">ğŸ“­</div>
                                                            <span className="text-sm">ì•„ì§ ë‚´ì—­ì´ ì—†ì–´ìš”</span>
                                                        </div>;
                                                    }

                                                    return lookupResult.map((item, index) => (
                                                        <div key={index} className="border border-gray-100 rounded-xl p-4 bg-gray-50/50 hover:border-rose-200 transition-colors">
                                                            <div className="border-b border-gray-200 pb-3 mb-3">
                                                                <div className="flex justify-between items-start mb-2">
                                                                    <div className="flex items-center gap-2">
                                                                        <span className={`inline-block px-2 py-0.5 rounded-full text-[10px] font-bold ${getStatusClass(item.status)}`}>{item.status || 'ì ‘ìˆ˜ì™„ë£Œ'}</span>
                                                                    </div>
                                                                    <span className="text-[10px] text-gray-400">{item.orderTime}</span>
                                                                </div>
                                                                <h3 className="font-bold text-gray-800">{item.model}</h3>
                                                                {item.scheduleName && <p className="text-xs text-gray-500 mt-1">{item.scheduleName}</p>}
                                                            </div>
                                                            
                                                            <div className="text-sm space-y-1 text-gray-600">
                                                                {(item.category === 'ì˜ˆì•½ì‹ ì²­' || !item.category) ? (
                                                                    <>
                                                                        {/* [ìˆ˜ì •] ë‚ ì§œ í˜•ì‹ì„ êµ¬ê¸€ ì‹œíŠ¸ ë°ì´í„° ê·¸ëŒ€ë¡œ ë…¸ì¶œ */}
                                                                        <div className="flex justify-between"><span className="text-xs text-gray-400">ë„ì°©ì˜ˆì •ì¼</span><span>{item.startDate}</span></div>
                                                                        <div className="flex justify-between"><span className="text-xs text-gray-400">ë°˜ë‚©ì¼</span><span>{item.endDate || '-'}</span></div>
                                                                    </>
                                                                ) : (
                                                                    <>
                                                                        {item.startDate && <div className="flex justify-between"><span className="text-xs text-gray-400">ê¸°ê°„/ë‚´ìš©</span><span>{item.startDate}</span></div>}
                                                                    </>
                                                                )}
                                                                <div className="flex justify-between pt-2 mt-2 border-t border-gray-200"><span className="font-bold text-xs">ê²°ì œê¸ˆì•¡</span><span className="font-bold text-rose-500">{parseInt(item.totalPrice).toLocaleString()}ì›</span></div>
                                                            </div>

                                                            {/* [ìˆ˜ì •] "í™•ì •" ìƒíƒœê°€ ì•„ë‹ ë•Œë§Œ ì…ê¸ˆ ê³„ì¢Œ ë…¸ì¶œ */}
                                                            {(!item.status || !item.status.includes('í™•ì •')) && (
                                                                <div className="mt-3 bg-yellow-50 p-3 rounded-lg border border-yellow-100">
                                                                    <div className="flex justify-between items-center mb-1">
                                                                        <span className="text-xs font-bold text-yellow-700">ì…ê¸ˆ ëŒ€ê¸°ì¤‘</span>
                                                                        <button onClick={() => copyToClipboard("1002000000000")} className="text-[10px] bg-white border border-yellow-200 text-yellow-700 px-2 py-0.5 rounded flex items-center gap-1 hover:bg-yellow-100">
                                                                            <Icons.Copy size={10} /> ë³µì‚¬
                                                                        </button>
                                                                    </div>
                                                                    <p className="text-xs text-gray-600">ìš°ë¦¬ì€í–‰ 1002-000-000000 (í•‘í¬ë Œíƒˆ)</p>
                                                                </div>
                                                            )}

                                                            {item.status && item.status.includes('í™•ì •') && (
                                                                <div className="mt-3 pt-3 border-t border-gray-100 flex justify-end items-center gap-2">
                                                                    {myReviews.some(r => r.id === item.id || (item.myReviewId && r.id === item.myReviewId)) || item.myReviewId ? (
                                                                        <>
                                                                            <span className="text-xs text-gray-400 font-bold px-2 py-1 bg-gray-50 rounded-lg">ì‘ì„± ì™„ë£Œ</span>
                                                                            <button 
                                                                                onClick={(e) => { e.stopPropagation(); openReviewModal(item); }}
                                                                                className="text-xs text-gray-500 underline hover:text-gray-800"
                                                                            >
                                                                                ìˆ˜ì •
                                                                            </button>
                                                                        </>
                                                                    ) : (
                                                                        <button 
                                                                            onClick={(e) => { e.stopPropagation(); openReviewModal(item); }} 
                                                                            className="text-xs font-bold text-rose-500 border border-rose-200 bg-rose-50 px-3 py-1.5 rounded-lg hover:bg-rose-100 transition-colors flex items-center gap-1"
                                                                        >
                                                                            <Icons.Star size={12} className="fill-current" /> ë¦¬ë·° ë‚¨ê¸°ê¸°
                                                                        </button>
                                                                    )}
                                                                </div>
                                                            )}
                                                        </div>
                                                    ));
                                                })()}
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {activeNav === 'manual' && (
                            <div className="p-5 animate-fade-in pb-24">
                                <h2 className="text-2xl font-bold text-gray-800 mb-6">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ ğŸ“˜</h2>
                                <div className="space-y-4">
                                    <div className="bg-white p-5 rounded-2xl shadow-sm border border-gray-100"><h3 className="font-bold text-gray-800 flex items-center gap-2"><Icons.FileText size={18} className="text-rose-500" /> ëŒ€ì—¬ëŠ” ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</h3><p className="text-sm text-gray-600 mt-2 leading-relaxed">í™ˆ í™”ë©´ì—ì„œ ì›í•˜ì‹œëŠ” ê¸°ì¢…ê³¼ ë‚ ì§œë¥¼ ì„ íƒ í›„ ì˜ˆì•½í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. ì‹ ë¶„ì¦ í™•ì¸ ì ˆì°¨ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div>
                                    <div className="bg-white p-5 rounded-2xl shadow-sm border border-gray-100"><h3 className="font-bold text-gray-800 flex items-center gap-2"><Icons.Truck size={18} className="text-blue-500" /> ë°°ì†¡ì€ ì–¸ì œ ì˜¤ë‚˜ìš”?</h3><p className="text-sm text-gray-600 mt-2 leading-relaxed">ëŒ€ì—¬ ì‹œì‘ì¼ ì „ë‚ ì— ìš°ì²´êµ­ íƒë°°ë¡œ ì•ˆì „í•˜ê²Œ ë„ì°©í•©ë‹ˆë‹¤. í€µì„œë¹„ìŠ¤ ì„ íƒ ì‹œ ë‹¹ì¼ ìˆ˜ë ¹ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p></div>
                                    <div className="bg-white p-5 rounded-2xl shadow-sm border border-gray-100"><h3 className="font-bold text-gray-800 flex items-center gap-2"><Icons.ShieldCheck size={18} className="text-green-500" /> íŒŒì†ë˜ë©´ ì–´ë–¡í•˜ì£ ?</h3><p className="text-sm text-gray-600 mt-2 leading-relaxed">ê°€ì…í•˜ì‹  ë³´í—˜ ìƒí’ˆì— ë”°ë¼ ìê¸°ë¶€ë‹´ê¸ˆì´ ë°œìƒí•©ë‹ˆë‹¤. íŒŒì† ì‹œ ì¦‰ì‹œ ê³ ê°ì„¼í„°ë¡œ ì—°ë½ì£¼ì„¸ìš”.</p></div>
                                </div>
                                <div className="mt-8 bg-gray-100 p-5 rounded-2xl text-center"><p className="font-bold text-gray-700">ë” ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹ ê°€ìš”?</p><button className="mt-3 bg-white border border-gray-200 text-gray-600 px-4 py-2 rounded-full text-sm font-bold shadow-sm">ì¹´ì¹´ì˜¤í†¡ ìƒë‹´í•˜ê¸°</button></div>
                            </div>
                        )}

                        <nav className="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white border-t border-gray-100 flex justify-around items-center h-[70px] z-50 rounded-t-2xl shadow-[0_-5px_10px_rgba(0,0,0,0.02)]">
                            <button onClick={() => handleNavChange('home')} className={`flex flex-col items-center justify-center w-full h-full space-y-1 ${activeNav === 'home' ? 'text-rose-500' : 'text-gray-400 hover:text-gray-500'}`}><Icons.Home size={activeNav === 'home' ? 26 : 24} strokeWidth={activeNav === 'home' ? 2.5 : 2} /><span className="text-[10px] font-bold">í™ˆ</span></button>
                            <button onClick={handleRentalStart} className={`flex flex-col items-center justify-center w-full h-full space-y-1 ${activeNav === 'rental' ? 'text-rose-500' : 'text-gray-400 hover:text-gray-500'}`}><Icons.CalendarPlus size={activeNav === 'rental' ? 26 : 24} strokeWidth={activeNav === 'rental' ? 2.5 : 2} /><span className="text-[10px] font-bold">ì˜ˆì•½í•˜ê¸°</span></button>
                            <button onClick={() => handleNavChange('manual')} className={`flex flex-col items-center justify-center w-full h-full space-y-1 ${activeNav === 'manual' ? 'text-rose-500' : 'text-gray-400 hover:text-gray-500'}`}><Icons.BookOpen size={activeNav === 'manual' ? 26 : 24} strokeWidth={activeNav === 'manual' ? 2.5 : 2} /><span className="text-[10px] font-bold">ë§¤ë‰´ì–¼</span></button>
                            <button onClick={() => handleNavChange('my')} className={`flex flex-col items-center justify-center w-full h-full space-y-1 ${activeNav === 'my' ? 'text-rose-500' : 'text-gray-400 hover:text-gray-500'}`}><Icons.User size={activeNav === 'my' ? 26 : 24} strokeWidth={activeNav === 'my' ? 2.5 : 2} /><span className="text-[10px] font-bold">ë§ˆì´</span></button>
                        </nav>

                        {isReviewModalOpen && (
                            <div className="fixed inset-0 z-[70] bg-black/50 flex items-center justify-center p-4 animate-fade-in">
                                <div className="bg-white rounded-3xl p-6 w-full max-w-xs shadow-2xl relative">
                                     <button onClick={() => setIsReviewModalOpen(false)} className="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                                    </button>
                                    <h3 className="text-lg font-bold text-gray-800 mb-1">ë¦¬ë·° ì“°ê¸° âœï¸</h3>
                                    <p className="text-xs text-gray-500 mb-6">{currentReviewItem?.model}</p>

                                    <div className="flex justify-center gap-2 mb-6">
                                        {[1, 2, 3, 4, 5].map(star => (
                                            <div key={star} onClick={() => setReviewForm({...reviewForm, rating: star})} className="cursor-pointer transition-transform hover:scale-110">
                                                <Icons.Star 
                                                    size={32} 
                                                    className={star <= reviewForm.rating ? "text-yellow-400 fill-current" : "text-gray-200"} 
                                                    strokeWidth={star <= reviewForm.rating ? 0 : 2}
                                                />
                                            </div>
                                        ))}
                                    </div>
                                    
                                    <div className="bg-gray-50 p-3 rounded-xl border border-gray-100 mb-4">
                                        <div className="flex justify-between mb-2">
                                            <span className="text-xs font-bold text-gray-700">{formatNameMasking(lookupName)}ë‹˜</span>
                                            <span className="text-xs font-bold text-yellow-500">ë³„ì  {reviewForm.rating}ì </span>
                                        </div>
                                        <textarea 
                                            className="w-full bg-transparent text-sm text-gray-800 outline-none resize-none h-20 placeholder-gray-400"
                                            placeholder="ëŒ€ì—¬í•˜ì‹  ê¸°ê¸°ëŠ” ì–´ë– ì…¨ë‚˜ìš”?&#13;&#10;ì†”ì§í•œ í›„ê¸°ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”!"
                                            value={reviewForm.text}
                                            onChange={(e) => setReviewForm({...reviewForm, text: e.target.value})}
                                        ></textarea>
                                    </div>

                                    <button onClick={handleReviewSubmit} className="w-full bg-rose-500 text-white py-3.5 rounded-xl font-bold shadow-lg shadow-rose-200 hover:bg-rose-600 transition-colors">
                                        {currentReviewItem.myReviewId ? 'ìˆ˜ì •í•˜ê¸°' : 'ë“±ë¡í•˜ê¸°'}
                                    </button>
                                </div>
                            </div>
                        )}

                        {isLogoutModalOpen && (
                            <div className="fixed inset-0 z-[60] bg-black/50 flex items-center justify-center p-4 animate-fade-in">
                                <div className="bg-white rounded-2xl p-6 w-full max-w-xs shadow-2xl text-center transform scale-100 transition-all">
                                    <div className="w-12 h-12 bg-rose-100 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <Icons.User size={24} />
                                    </div>
                                    <h3 className="text-lg font-bold text-gray-800 mb-2">ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ì–´ìš”?</h3>
                                    <p className="text-sm text-gray-500 mb-6">ì €ì¥ëœ ì˜ˆì•½ì ì •ë³´ê°€ ê¸°ê¸°ì—ì„œ ì‚­ì œë©ë‹ˆë‹¤.</p>
                                    <div className="flex gap-2">
                                        <button onClick={() => setIsLogoutModalOpen(false)} className="flex-1 py-3 rounded-xl bg-gray-100 text-gray-600 font-bold hover:bg-gray-200 transition-colors text-sm">ì·¨ì†Œ</button>
                                        <button onClick={handleLogoutConfirm} className="flex-1 py-3 rounded-xl bg-rose-500 text-white font-bold hover:bg-rose-600 transition-colors text-sm">ë¡œê·¸ì•„ì›ƒ</button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<PhoneRentalApp />);
    </script>
</body>
</html>
